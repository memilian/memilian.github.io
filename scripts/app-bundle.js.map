{"version":3,"sources":["src/Detector.js","src/TrackballControls.js","src/app.js","src/environment.js","src/main.js","src/resources/index.js","src/screens/screen-contact.js","src/screens/screen-cv.js","src/screens/screen-desc.js","src/screens/screen-projects.js","src/screens/screen-skills.js","src/services/lerp-service.js","src/resources/attributes/polygon-transition.js","src/resources/attributes/scroll-next.js","src/resources/attributes/scroll-target.js","src/resources/attributes/scroll-transform.js","src/resources/elements/console-section.js","src/resources/elements/menu-bar.js","src/resources/elements/project-showcase.js","src/threefix/postprocessing/BloomPass.js","src/threefix/postprocessing/EffectComposer.js","src/threefix/postprocessing/FilmPass.js","src/threefix/postprocessing/MaskPass.js","src/threefix/postprocessing/RenderPass.js","src/threefix/postprocessing/ShaderPass.js","src/threefix/shaders/ConvolutionShader.js","src/threefix/shaders/CopyShader.js","src/threefix/shaders/FilmShader.js","src/threefix/shaders/FocusShader.js","styles/style.css"],"names":["Detector","canvas","window","CanvasRenderingContext2D","webgl","document","createElement","WebGLRenderingContext","getContext","e","webgl2","WebGL2RenderingContext","workers","Worker","fileapi","File","FileReader","FileList","Blob","getWebGLErrorMessage","element","id","style","fontFamily","fontSize","fontWeight","textAlign","background","color","padding","width","margin","innerHTML","join","addGetWebGLMessage","parameters","parent","undefined","body","appendChild","module","exports","THREE","TrackballControls","object","domElement","_this","STATE","NONE","ROTATE","ZOOM","PAN","TOUCH_ROTATE","TOUCH_ZOOM_PAN","enabled","screen","left","top","height","rotateSpeed","zoomSpeed","panSpeed","noRotate","noZoom","noPan","staticMoving","dynamicDampingFactor","minDistance","maxDistance","Infinity","keys","target","Vector3","EPS","lastPosition","_state","_prevState","_eye","_movePrev","Vector2","_moveCurr","_lastAxis","_lastAngle","_zoomStart","_zoomEnd","_touchZoomDistanceStart","_touchZoomDistanceEnd","_panStart","_panEnd","target0","clone","position0","position","up0","up","changeEvent","type","startEvent","endEvent","handleResize","innerWidth","innerHeight","box","getBoundingClientRect","d","ownerDocument","documentElement","pageXOffset","clientLeft","pageYOffset","clientTop","handleEvent","event","getMouseOnScreen","vector","pageX","pageY","set","getMouseOnCircle","rotateCamera","axis","quaternion","Quaternion","eyeDirection","objectUpDirection","objectSidewaysDirection","moveDirection","angle","x","y","length","copy","sub","normalize","crossVectors","setLength","add","setFromAxisAngle","applyQuaternion","Math","sqrt","zoomCamera","factor","multiplyScalar","panCamera","mouseChange","objectUp","pan","lengthSq","cross","subVectors","checkDistances","addVectors","update","lookAt","distanceToSquared","dispatchEvent","reset","keydown","removeEventListener","keyCode","keyup","addEventListener","mousedown","preventDefault","stopPropagation","button","mousemove","mouseup","mousewheel","deltaMode","deltaY","touchstart","touches","dx","dy","touchmove","touchend","contextmenu","dispose","prototype","Object","create","EventDispatcher","constructor","App","EventAggregator","ea","screens","screenRefs","resizeId","eventAggregator","screenVms","attached","resizeScreens","bind","watchReady","setInterval","pbProgress","setTimeout","loader","querySelector","transition","backgroundColor","segments","querySelectorAll","s","opacity","stopLoader","publish","clearInterval","clearTimeout","w","h","sc","debug","testing","configure","aurelia","use","standardConfiguration","feature","plugin","globalResources","PLATFORM","moduleName","environment","developmentLogging","start","then","setRoot","config","ScreenContact","ValidationControllerFactory","Validator","controllerFactory","validator","displayTitle","canSubmit","controller","createForCurrentScope","validateTrigger","changeOrBlur","subscribe","validateAll","ValidationRules","ensure","c","fname","required","withMessage","lname","email","message","minLength","on","validateObject","results","every","result","valid","fnameError","lnameError","emailError","messageError","errors","error","propertyName","activate","data","index","advanceProgress","ScreenCv","ScreenDesc","isChrome","chrome","webstore","portraitCrop","portrait","filter","showKeys","ScreenProject","LerpService","ls","sliders","verticalImageStyle","eachImageWrapper","lerpService","projectData","name","description1","description2","coverClass","cover","nextProject","title","au","viewModel","next","description","previousProject","previous","sliderElements","slider","children","push","container","duration","delay","end","init","ease","time","begin","change","onChange","prev","controls","classList","remove","onresize","changeSlider","project","indexOf","verticalImages","adjustControls","wrapper","images","clientHeight","control","clientWidth","ScreenSkills","lerp","inited","ready","paused","canStart","mouseJustPressed","totalTime","startAt","font","loadManager","LoadingManager","FontLoader","discSprite","TextureLoader","load","onLoad","onscroll","size","renderer","setSize","camera","aspect","updateProjectionMatrix","composer","offsetTop","bot","offsetHeight","screenTop","scrollTop","screenBot","startScene","textColor","Color","hoverTextColor","scene","Scene","PerspectiveCamera","WebGLRenderer","antialias","alpha","setPixelRatio","devicePixelRatio","setClearColor","autoClear","renderModel","RenderPass","effectBloom","BloomPass","autoclear","effectCopy","ShaderPass","CopyShader","renderToScreen","EffectComposer","addPass","clear","skillsIco","IcosahedronBufferGeometry","attributes","dynamic","colors","vertForces","p","count","addAttribute","Float32BufferAttribute","nskill","getSkillInfos","value","lines","text","verticesInfos","curIdx","nextVert","startTime","hovered","skills","offset","increment","PI","i","r","pow","phi","cos","z","sin","lineMaterial","LineBasicMaterial","vertexColors","VertexColors","textMaterial","MeshLambertMaterial","rad","j","pos","posVec","vertices","vertx","getX","verty","getY","vertz","getZ","distSq","theta","acos","atan","skillVal","normDist","dist","timeStarted","newRad","power","sort","a","b","center","random","l","lineGeom","BufferGeometry","line","Line","textGeometry","TextBufferGeometry","scale","computeBoundingBox","Mesh","applyMatrix","Matrix4","makeTranslation","geometry","boundingBox","getSize","bb","bbg","BoxGeometry","max","min","bbm","MeshBasicMaterial","transparent","desiredPos","sum","p1","p2","divideScalar","needsUpdate","skillsOriginalPos","premultiplyAlpha","material","PointsMaterial","map","alphaTest","skillsIcoMesh","Points","light","PointLight","ambientLight","AmbientLight","greySphere","SphereGeometry","mat","outerSphere","mat2","side","DoubleSide","raycaster","Raycaster","Date","now","lastUpdate","mouse","onmousemove","onmouseclick","clientX","clientY","dt","skill","lastVertice","vert","vertId","posCoef","setX","setY","setZ","colCoef","sk","bounce","loop","range","addEasing","t","setFromCamera","isect","intersectObject","g","render","requestAnimationFrame","instance","idCounter","easingInfos","toRemove","processEasings","func","scope","onFinish","infos","started","canceled","rem","splice","PolygonTransition","DOM","Element","rotX","rotY","rotZ","resizeID","resizeID2","faces","faceCount","perspective","transformStyle","initialize","ev","key","orientation","transform","distZ","dir","parseInt","direction","tan","face","rot","bindable","ScrollNext","nextBtn","onclick","toNext","scrollTo","valueChanged","newValue","oldValue","ScrollTarget","smoothScrollId","cancelNext","lastY","ratio","abs","indexTweak","ScrollTransform","rotateAmount","from","to","transformOrigin","ConsoleSection","state","typingSpeed","linePauseDuration","currentLineIdx","currentCharIdx","linesElements","currentWordIdx","pauseTimer","parentOverride","_console","getElementsByClassName","typingInterval","carret","parentElement","removeChild","createCharSpan","char","span","textContent","startWordSwitch","words","oldWord","childElementCount","firstChild","word","wordElement","wordSwitchInterval","wordSwitch","nextWordIdx","child","pausedTime","blink","carretInterval","letters","letter","contains","floor","substring","highlightContainer","charAt","MenuBar","mouseY","wasMouseInRange","menu","updateProgress","current","titles","scrollHeight","foreground","goToScreen","ProjectShowcase","updateTransform","prevActive","prevActiveIndex","active","activeIndex","previousIndex","nextIndex","strength","kernelSize","sigma","resolution","Pass","call","pars","minFilter","LinearFilter","magFilter","format","RGBAFormat","renderTargetX","WebGLRenderTarget","texture","renderTargetY","console","copyShader","copyUniforms","UniformsUtils","uniforms","materialCopy","ShaderMaterial","vertexShader","fragmentShader","blending","AdditiveBlending","ConvolutionShader","convolutionShader","convolutionUniforms","blurX","buildKernel","materialConvolution","defines","toFixed","needsSwap","OrthographicCamera","quad","PlaneBufferGeometry","frustumCulled","assign","writeBuffer","readBuffer","delta","maskActive","context","disable","STENCIL_TEST","blurY","enable","renderTarget","stencilBuffer","getDrawingBufferSize","renderTarget1","renderTarget2","passes","copyPass","swapBuffers","tmp","pass","insertPass","il","stencilFunc","NOTEQUAL","EQUAL","MaskPass","ClearMaskPass","FilmPass","noiseIntensity","scanlinesIntensity","scanlinesCount","grayscale","FilmShader","shader","nIntensity","sIntensity","sCount","inverse","buffers","setMask","depth","setLocked","writeValue","clearValue","stencil","setTest","setOp","REPLACE","setFunc","ALWAYS","setClear","KEEP","overrideMaterial","clearColor","clearAlpha","clearDepth","oldAutoClear","oldClearColor","oldClearAlpha","getClearColor","getHex","getClearAlpha","textureID","gauss","exp","values","halfWidth","kMaxKernelSize","ceil","Array","FocusShader"],"mappings":"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","file":"app-bundle.js","sourcesContent":["/**\n * @author alteredq / http://alteredqualia.com/\n * @author mr.doob / http://mrdoob.com/\n */\n\nvar Detector = {\n\n\tcanvas: !! window.CanvasRenderingContext2D,\n\twebgl: ( function () {\n\n\t\ttry {\n\n\t\t\tvar canvas = document.createElement( 'canvas' ); return !! ( window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ) );\n\n\t\t} catch ( e ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t} )(),\n\twebgl2: ( function () {\n\n\t\ttry {\n\n\t\t\tvar canvas = document.createElement( 'canvas' ); return !! ( window.WebGL2RenderingContext && ( canvas.getContext( 'webgl2' ) ) );\n\n\t\t} catch ( e ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t} )(),\n\tworkers: !! window.Worker,\n\tfileapi: window.File && window.FileReader && window.FileList && window.Blob,\n\n\tgetWebGLErrorMessage: function () {\n\n\t\tvar element = document.createElement( 'div' );\n\t\telement.id = 'webgl-error-message';\n\t\telement.style.fontFamily = 'monospace';\n\t\telement.style.fontSize = '13px';\n\t\telement.style.fontWeight = 'normal';\n\t\telement.style.textAlign = 'center';\n\t\telement.style.background = '#fff';\n\t\telement.style.color = '#000';\n\t\telement.style.padding = '1.5em';\n\t\telement.style.width = '400px';\n\t\telement.style.margin = '5em auto 0';\n\n\t\tif ( ! this.webgl ) {\n\n\t\t\telement.innerHTML = window.WebGLRenderingContext ? [\n\t\t\t\t'Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br />',\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n\t\t\t].join( '\\n' ) : [\n\t\t\t\t'Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>',\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n\t\t\t].join( '\\n' );\n\n\t\t}\n\n\t\treturn element;\n\n\t},\n\n\taddGetWebGLMessage: function ( parameters ) {\n\n\t\tvar parent, id, element;\n\n\t\tparameters = parameters || {};\n\n\t\tparent = parameters.parent !== undefined ? parameters.parent : document.body;\n\t\tid = parameters.id !== undefined ? parameters.id : 'oldie';\n\n\t\telement = Detector.getWebGLErrorMessage();\n\t\telement.id = id;\n\n\t\tparent.appendChild( element );\n\n\t}\n\n};\n\n// browserify support\nif ( typeof module === 'object' ) {\n\n\tmodule.exports = Detector;\n\n}\n","/**\n * @author Eberhard Graether / http://egraether.com/\n * @author Mark Lundin \t/ http://mark-lundin.com\n * @author Simone Manini / http://daron1337.github.io\n * @author Luca Antiga \t/ http://lantiga.github.io\n */\nimport * as THREE from \"three\";\n\nTHREE.TrackballControls = function ( object, domElement ) {\n\n\tvar _this = this;\n\tvar STATE = { NONE: - 1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\n\n\tthis.object = object;\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t// API\n\n\tthis.enabled = true;\n\n\tthis.screen = { left: 0, top: 0, width: 0, height: 0 };\n\n\tthis.rotateSpeed = 1.0;\n\tthis.zoomSpeed = 1.2;\n\tthis.panSpeed = 0.3;\n\n\tthis.noRotate = false;\n\tthis.noZoom = false;\n\tthis.noPan = false;\n\n\tthis.staticMoving = false;\n\tthis.dynamicDampingFactor = 0.2;\n\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\tthis.keys = [ 65 /*A*/, 83 /*S*/, 68 /*D*/ ];\n\n\t// internals\n\n\tthis.target = new THREE.Vector3();\n\n\tvar EPS = 0.000001;\n\n\tvar lastPosition = new THREE.Vector3();\n\n\tvar _state = STATE.NONE,\n\t\t_prevState = STATE.NONE,\n\n\t\t_eye = new THREE.Vector3(),\n\n\t\t_movePrev = new THREE.Vector2(),\n\t\t_moveCurr = new THREE.Vector2(),\n\n\t\t_lastAxis = new THREE.Vector3(),\n\t\t_lastAngle = 0,\n\n\t\t_zoomStart = new THREE.Vector2(),\n\t\t_zoomEnd = new THREE.Vector2(),\n\n\t\t_touchZoomDistanceStart = 0,\n\t\t_touchZoomDistanceEnd = 0,\n\n\t\t_panStart = new THREE.Vector2(),\n\t\t_panEnd = new THREE.Vector2();\n\n\t// for reset\n\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.up0 = this.object.up.clone();\n\n\t// events\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\n\t// methods\n\n\tthis.handleResize = function () {\n\n\t\tif ( this.domElement === document ) {\n\n\t\t\tthis.screen.left = 0;\n\t\t\tthis.screen.top = 0;\n\t\t\tthis.screen.width = window.innerWidth;\n\t\t\tthis.screen.height = window.innerHeight;\n\n\t\t} else {\n\n\t\t\tvar box = this.domElement.getBoundingClientRect();\n\t\t\t// adjustments come from similar code in the jquery offset() function\n\t\t\tvar d = this.domElement.ownerDocument.documentElement;\n\t\t\tthis.screen.left = box.left + window.pageXOffset - d.clientLeft;\n\t\t\tthis.screen.top = box.top + window.pageYOffset - d.clientTop;\n\t\t\tthis.screen.width = box.width;\n\t\t\tthis.screen.height = box.height;\n\n\t\t}\n\n\t};\n\n\tthis.handleEvent = function ( event ) {\n\n\t\tif ( typeof this[ event.type ] == 'function' ) {\n\n\t\t\tthis[ event.type ]( event );\n\n\t\t}\n\n\t};\n\n\tvar getMouseOnScreen = ( function () {\n\n\t\tvar vector = new THREE.Vector2();\n\n\t\treturn function getMouseOnScreen( pageX, pageY ) {\n\n\t\t\tvector.set(\n\t\t\t\t( pageX - _this.screen.left ) / _this.screen.width,\n\t\t\t\t( pageY - _this.screen.top ) / _this.screen.height\n\t\t\t);\n\n\t\t\treturn vector;\n\n\t\t};\n\n\t}() );\n\n\tvar getMouseOnCircle = ( function () {\n\n\t\tvar vector = new THREE.Vector2();\n\n\t\treturn function getMouseOnCircle( pageX, pageY ) {\n\n\t\t\tvector.set(\n\t\t\t\t( ( pageX - _this.screen.width * 0.5 - _this.screen.left ) / ( _this.screen.width * 0.5 ) ),\n\t\t\t\t( ( _this.screen.height + 2 * ( _this.screen.top - pageY ) ) / _this.screen.width ) // screen.width intentional\n\t\t\t);\n\n\t\t\treturn vector;\n\n\t\t};\n\n\t}() );\n\n\tthis.rotateCamera = ( function () {\n\n\t\tvar axis = new THREE.Vector3(),\n\t\t\tquaternion = new THREE.Quaternion(),\n\t\t\teyeDirection = new THREE.Vector3(),\n\t\t\tobjectUpDirection = new THREE.Vector3(),\n\t\t\tobjectSidewaysDirection = new THREE.Vector3(),\n\t\t\tmoveDirection = new THREE.Vector3(),\n\t\t\tangle;\n\n\t\treturn function rotateCamera() {\n\n\t\t\tmoveDirection.set( _moveCurr.x - _movePrev.x, _moveCurr.y - _movePrev.y, 0 );\n\t\t\tangle = moveDirection.length();\n\n\t\t\tif ( angle ) {\n\n\t\t\t\t_eye.copy( _this.object.position ).sub( _this.target );\n\n\t\t\t\teyeDirection.copy( _eye ).normalize();\n\t\t\t\tobjectUpDirection.copy( _this.object.up ).normalize();\n\t\t\t\tobjectSidewaysDirection.crossVectors( objectUpDirection, eyeDirection ).normalize();\n\n\t\t\t\tobjectUpDirection.setLength( _moveCurr.y - _movePrev.y );\n\t\t\t\tobjectSidewaysDirection.setLength( _moveCurr.x - _movePrev.x );\n\n\t\t\t\tmoveDirection.copy( objectUpDirection.add( objectSidewaysDirection ) );\n\n\t\t\t\taxis.crossVectors( moveDirection, _eye ).normalize();\n\n\t\t\t\tangle *= _this.rotateSpeed;\n\t\t\t\tquaternion.setFromAxisAngle( axis, angle );\n\n\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\t_this.object.up.applyQuaternion( quaternion );\n\n\t\t\t\t_lastAxis.copy( axis );\n\t\t\t\t_lastAngle = angle;\n\n\t\t\t} else if ( ! _this.staticMoving && _lastAngle ) {\n\n\t\t\t\t_lastAngle *= Math.sqrt( 1.0 - _this.dynamicDampingFactor );\n\t\t\t\t_eye.copy( _this.object.position ).sub( _this.target );\n\t\t\t\tquaternion.setFromAxisAngle( _lastAxis, _lastAngle );\n\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\t_this.object.up.applyQuaternion( quaternion );\n\n\t\t\t}\n\n\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t};\n\n\t}() );\n\n\n\tthis.zoomCamera = function () {\n\n\t\tvar factor;\n\n\t\tif ( _state === STATE.TOUCH_ZOOM_PAN ) {\n\n\t\t\tfactor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n\t\t\t_touchZoomDistanceStart = _touchZoomDistanceEnd;\n\t\t\t_eye.multiplyScalar( factor );\n\n\t\t} else {\n\n\t\t\tfactor = 1.0 + ( _zoomEnd.y - _zoomStart.y ) * _this.zoomSpeed;\n\n\t\t\tif ( factor !== 1.0 && factor > 0.0 ) {\n\n\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t}\n\n\t\t\tif ( _this.staticMoving ) {\n\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t} else {\n\n\t\t\t\t_zoomStart.y += ( _zoomEnd.y - _zoomStart.y ) * this.dynamicDampingFactor;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.panCamera = ( function () {\n\n\t\tvar mouseChange = new THREE.Vector2(),\n\t\t\tobjectUp = new THREE.Vector3(),\n\t\t\tpan = new THREE.Vector3();\n\n\t\treturn function panCamera() {\n\n\t\t\tmouseChange.copy( _panEnd ).sub( _panStart );\n\n\t\t\tif ( mouseChange.lengthSq() ) {\n\n\t\t\t\tmouseChange.multiplyScalar( _eye.length() * _this.panSpeed );\n\n\t\t\t\tpan.copy( _eye ).cross( _this.object.up ).setLength( mouseChange.x );\n\t\t\t\tpan.add( objectUp.copy( _this.object.up ).setLength( mouseChange.y ) );\n\n\t\t\t\t_this.object.position.add( pan );\n\t\t\t\t_this.target.add( pan );\n\n\t\t\t\tif ( _this.staticMoving ) {\n\n\t\t\t\t\t_panStart.copy( _panEnd );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_panStart.add( mouseChange.subVectors( _panEnd, _panStart ).multiplyScalar( _this.dynamicDampingFactor ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() );\n\n\tthis.checkDistances = function () {\n\n\t\tif ( ! _this.noZoom || ! _this.noPan ) {\n\n\t\t\tif ( _eye.lengthSq() > _this.maxDistance * _this.maxDistance ) {\n\n\t\t\t\t_this.object.position.addVectors( _this.target, _eye.setLength( _this.maxDistance ) );\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t}\n\n\t\t\tif ( _eye.lengthSq() < _this.minDistance * _this.minDistance ) {\n\n\t\t\t\t_this.object.position.addVectors( _this.target, _eye.setLength( _this.minDistance ) );\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.update = function () {\n\n\t\t_eye.subVectors( _this.object.position, _this.target );\n\n\t\tif ( ! _this.noRotate ) {\n\n\t\t\t_this.rotateCamera();\n\n\t\t}\n\n\t\tif ( ! _this.noZoom ) {\n\n\t\t\t_this.zoomCamera();\n\n\t\t}\n\n\t\tif ( ! _this.noPan ) {\n\n\t\t\t_this.panCamera();\n\n\t\t}\n\n\t\t_this.object.position.addVectors( _this.target, _eye );\n\n\t\t_this.checkDistances();\n\n\t\t_this.object.lookAt( _this.target );\n\n\t\tif ( lastPosition.distanceToSquared( _this.object.position ) > EPS ) {\n\n\t\t\t_this.dispatchEvent( changeEvent );\n\n\t\t\tlastPosition.copy( _this.object.position );\n\n\t\t}\n\n\t};\n\n\tthis.reset = function () {\n\n\t\t_state = STATE.NONE;\n\t\t_prevState = STATE.NONE;\n\n\t\t_this.target.copy( _this.target0 );\n\t\t_this.object.position.copy( _this.position0 );\n\t\t_this.object.up.copy( _this.up0 );\n\n\t\t_eye.subVectors( _this.object.position, _this.target );\n\n\t\t_this.object.lookAt( _this.target );\n\n\t\t_this.dispatchEvent( changeEvent );\n\n\t\tlastPosition.copy( _this.object.position );\n\n\t};\n\n\t// listeners\n\n\tfunction keydown( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\twindow.removeEventListener( 'keydown', keydown );\n\n\t\t_prevState = _state;\n\n\t\tif ( _state !== STATE.NONE ) {\n\n\t\t\treturn;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.ROTATE ] && ! _this.noRotate ) {\n\n\t\t\t_state = STATE.ROTATE;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.ZOOM ] && ! _this.noZoom ) {\n\n\t\t\t_state = STATE.ZOOM;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.PAN ] && ! _this.noPan ) {\n\n\t\t\t_state = STATE.PAN;\n\n\t\t}\n\n\t}\n\n\tfunction keyup( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\t_state = _prevState;\n\n\t\twindow.addEventListener( 'keydown', keydown, false );\n\n\t}\n\n\tfunction mousedown( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( _state === STATE.NONE ) {\n\n\t\t\t_state = event.button;\n\n\t\t}\n\n\t\tif ( _state === STATE.ROTATE && ! _this.noRotate ) {\n\n\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t} else if ( _state === STATE.ZOOM && ! _this.noZoom ) {\n\n\t\t\t_zoomStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t_zoomEnd.copy( _zoomStart );\n\n\t\t} else if ( _state === STATE.PAN && ! _this.noPan ) {\n\n\t\t\t_panStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t_panEnd.copy( _panStart );\n\n\t\t}\n\n\t\tdocument.addEventListener( 'mousemove', mousemove, false );\n\t\tdocument.addEventListener( 'mouseup', mouseup, false );\n\n\t\t_this.dispatchEvent( startEvent );\n\n\t}\n\n\tfunction mousemove( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( _state === STATE.ROTATE && ! _this.noRotate ) {\n\n\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\n\t\t} else if ( _state === STATE.ZOOM && ! _this.noZoom ) {\n\n\t\t\t_zoomEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t} else if ( _state === STATE.PAN && ! _this.noPan ) {\n\n\t\t\t_panEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t}\n\n\t}\n\n\tfunction mouseup( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\t_state = STATE.NONE;\n\n\t\tdocument.removeEventListener( 'mousemove', mousemove );\n\t\tdocument.removeEventListener( 'mouseup', mouseup );\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction mousewheel( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tif ( _this.noZoom === true ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.deltaMode ) {\n\n\t\t\tcase 2:\n\t\t\t\t// Zoom in pages\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.025;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\t// Zoom in lines\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.01;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t// undefined, 0, assume pixels\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.00025;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t_this.dispatchEvent( startEvent );\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction touchstart( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\tbreak;\n\n\t\t\tdefault: // 2 or more\n\t\t\t\t_state = STATE.TOUCH_ZOOM_PAN;\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t_touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n\t\t\t\t_panStart.copy( getMouseOnScreen( x, y ) );\n\t\t\t\t_panEnd.copy( _panStart );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t_this.dispatchEvent( startEvent );\n\n\t}\n\n\tfunction touchmove( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\tbreak;\n\n\t\t\tdefault: // 2 or more\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t_touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n\t\t\t\t_panEnd.copy( getMouseOnScreen( x, y ) );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction touchend( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 0:\n\t\t\t\t_state = STATE.NONE;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction contextmenu( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\tthis.dispose = function () {\n\n\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu, false );\n\t\tthis.domElement.removeEventListener( 'mousedown', mousedown, false );\n\t\tthis.domElement.removeEventListener( 'wheel', mousewheel, false );\n\n\t\tthis.domElement.removeEventListener( 'touchstart', touchstart, false );\n\t\tthis.domElement.removeEventListener( 'touchend', touchend, false );\n\t\tthis.domElement.removeEventListener( 'touchmove', touchmove, false );\n\n\t\tdocument.removeEventListener( 'mousemove', mousemove, false );\n\t\tdocument.removeEventListener( 'mouseup', mouseup, false );\n\n\t\twindow.removeEventListener( 'keydown', keydown, false );\n\t\twindow.removeEventListener( 'keyup', keyup, false );\n\n\t};\n\n\tthis.domElement.addEventListener( 'contextmenu', contextmenu, false );\n\tthis.domElement.addEventListener( 'mousedown', mousedown, false );\n\tthis.domElement.addEventListener( 'wheel', mousewheel, false );\n\n\tthis.domElement.addEventListener( 'touchstart', touchstart, false );\n\tthis.domElement.addEventListener( 'touchend', touchend, false );\n\tthis.domElement.addEventListener( 'touchmove', touchmove, false );\n\n\twindow.addEventListener( 'keydown', keydown, false );\n\twindow.addEventListener( 'keyup', keyup, false );\n\n\tthis.handleResize();\n\n\t// force an update at start\n\tthis.update();\n\n};\n\nTHREE.TrackballControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.TrackballControls.prototype.constructor = THREE.TrackballControls;\n","import { inject } from 'aurelia-framework';\nimport { EventAggregator } from 'aurelia-event-aggregator';\n\n@inject(EventAggregator)\nexport class App {\n  screens=[];\n  screenRefs=[];\n\n  eventAggregator;\n\n  constructor(ea){\n    this.eventAggregator = ea;\n    this.screenVms = [\n      \"screens/screen-desc\",\n      \"screens/screen-projects\",\n      \"screens/screen-skills\",\n      \"screens/screen-cv\",\n      \"screens/screen-contact\",\n    ]\n  }\n\n  attached(){\n\n    window.addEventListener('resize', this.resizeScreens.bind(this));\n\n    let watchReady = null;\n    watchReady = setInterval(function(){\n      if(pbProgress >= 1.0){\n        setTimeout(function(){\n          let loader = document.querySelector('.loader');\n          if(loader != null){\n            loader.style.transition = \"all 1s ease-in-out\";\n            loader.style.backgroundColor = \"rgba(66,67,66,0)\";\n          }\n          let segments = document.querySelectorAll('.circle-segment');\n          for(let s of segments){\n            s.style.transition = \"all 1s ease-in-out\";\n            s.style.opacity = 0;\n          }\n          \n          setTimeout(function(){\n            stopLoader();\n            this.resizeScreens();\n            this.eventAggregator.publish(\"app-ready\");\n          }.bind(this), 1000);\n        }.bind(this), 2000);\n\n        setTimeout(function(){\n          this.resizeScreens();\n        }.bind(this), 1000);\n\n        clearInterval(watchReady);\n      }\n    }.bind(this), 25);\n\n    // setTimeout(this.resizeScreens.bind(this), 100);\n    \n  }\n\n  resizeId = null;\n\n  resizeScreens(){\n    clearTimeout(this.resizeId);\n    this.resizeId = setTimeout(function(){\n      this.eventAggregator.publish(\"resize\", {w: window.innerWidth, h: window.innerHeight});\n      this.screens = document.querySelectorAll('.screen');\n      var h = window.innerHeight;\n      for(let sc of this.screens){\n        sc.style.height = h+'px';\n      }\n    }.bind(this), 40)\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\nimport { Aurelia, PLATFORM } from \"aurelia-framework\";\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources')\n    .plugin('aurelia-validation')\n    .globalResources([PLATFORM.moduleName('./resources/elements/console-section')])\n    .globalResources([PLATFORM.moduleName('./resources/attributes/scroll-next')])\n    .globalResources([PLATFORM.moduleName('./resources/attributes/scroll-target')])\n    .globalResources([PLATFORM.moduleName('./resources/attributes/scroll-transform')])\n    .globalResources([PLATFORM.moduleName('./resources/attributes/polygon-transition')])\n    .globalResources([PLATFORM.moduleName('./resources/elements/menu-bar')])\n    ;\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import {inject, NewInstance} from 'aurelia-framework';\nimport {Validator,\n  ValidationController,\n  ValidationControllerFactory,\n  ValidationRules,\n  validateTrigger,} from \"aurelia-validation\";\n\n@inject(ValidationControllerFactory, Validator)\nexport class ScreenContact{\n  displayTitle=\"Contact\"\n  index;\n\n  fname;\n  fnameError;\n  lname;\n  lnameError;\n  email;\n  emailError;\n  message;\n  messageError;\n  \n  canSubmit = false;\n\n  constructor(controllerFactory, validator){\n    this.validator = validator;\n    this.controller = controllerFactory.createForCurrentScope();\n    this.controller.validateTrigger = validateTrigger.changeOrBlur;\n    this.controller.subscribe(event => this.validateAll());\n    ValidationRules.ensure((c)=>c.fname).required().withMessage(\"Prénom est un champ requis\")\n      .ensure((c)=>c.lname).required().withMessage(\"Nom est un champ requis\")\n      .ensure((c)=>c.email).email().withMessage(\"Cet email n'est pas valide\").required().withMessage(\"Email est un champ requis\")\n      .ensure((c)=>c.message).minLength(25).withMessage(\"Message trop court\").required().withMessage(\"Message est un champ requis\")\n      .on(this);\n  }\n\n  attached(){\n    this.validateAll();\n  }\n\n  validateAll(){\n    this.validator.validateObject(this)\n        .then(results => {\n          this.canSubmit = results.every(result => result.valid)\n          this.fnameError = \"\";\n          this.lnameError = \"\";\n          this.emailError = \"\";\n          this.messageError = \"\";\n          for(let error of this.controller.errors){\n            this[error.propertyName+\"Error\"] = error.message;\n          }\n        });\n  }\n\n  activate(data){\n    this.index = data.index;\n    window.advanceProgress();\n  }\n}\n","\n\nexport class ScreenCv{\n  index;\n  displayTitle=\"CV\";\n  activate(data){\n    this.index = data.index;\n    window.advanceProgress();\n  }\n}\n","import {inject} from \"aurelia-framework\";\nimport { EventAggregator } from 'aurelia-event-aggregator';\n\n@inject(EventAggregator)\nexport class ScreenDesc {\n  \n  displayTitle=\"A propos\"\n  isChrome = false;\n  index;\n\n  constructor(ea){\n    this.ea = ea;\n    this.isChrome = !!window.chrome && !! window.chrome.webstore;\n    ea.subscribe(\"typing-finished\", function(){\n      this.portraitCrop.style.opacity = 1;\n      this.portrait.style.filter = \"blur(0px)\";\n      this.showKeys.style.opacity = 1;\n      // if(!this.isChrome){\n      //   this.chromeWarning.style.opacity = 1;\n      // }\n    }.bind(this));\n  }\n\n  activate(data){\n    this.index = data.index;\n    window.advanceProgress();\n  }\n}\n","import { inject } from 'aurelia-framework';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport { LerpService } from 'services/lerp-service';\nimport { getSlider } from 'simple-slider';\n\n@inject(EventAggregator, LerpService)\nexport class ScreenProject{\n  displayTitle=\"Projets\"\n  title;\n  description;\n  cover;\n  sliders = [];\n  constructor(ea, ls){\n    this.lerpService = ls;\n    this.ea = ea;\n    this.projectData = [\n      {\n        name : \"The underworld\",\n        description1 : \"<p>Un mod pour le jeu <strong>Minecraft</strong>. Le mod (plugin) ajoute une dimension souterraine au jeu, un boss, des ennemis et de nombreux objets.</p>\",\n        description2 : \"<ul><li>POO en JAVA</li><li>Naviguer dans une grande base de code</li><li>Résolution de bogues</li><li>Génération procédurale</li></ul>\",\n        coverClass: \"image-wrapper\",\n        cover: [\"img/mc1.jpg\", \"img/mc2.jpg\", \"img/mc4.jpg\"]\n      },\n      {\n        name : \"Java Voxel engine\",\n        description1 : \"<p>Un Voxel engine en <strong>Java</strong>, réalisé avec le moteur de jeu JMonkey 3. Affiche un terrain infini généré de façon procédurale.</p><p> Le moteur développé supporte : </p><ul><li>Ajout / suppression de blocks dans un volume</li><li>Générations de différents types de terrain</li><li>Ambient occlusion par voxel</li><li>Aucune limite de construction verticale</li></ul>\",\n        description2 : \"<ul><li>POO en Java</li><li>Développement 3d temps réel</li><li>Fonctionnement de la pipeline graphique</li><li>Programmation concurrente</li><li>Shaders GLSL</li><li>Concepts de génération procédurale</li></ul>\",\n        coverClass: \"image-wrapper\",\n        cover: [\"img/vox1.jpg\", \"img/vox2.jpg\", \"img/vox3.jpg\", \"img/vox4.jpg\", \"img/vox5.jpg\"]\n      },\n      {\n        name : \"Yasis\",\n        description1 : \"<p>Un jeu web de type shooter, développé en <strong>Haxe / Javascript</strong>.</p><p>Le projet a été réalisé en mode agile, avec plusieurs courtes itérations.</p>\",\n        description2 : \"<ul><li>Paradigme entité / composants</li><li>Fonctionnement et optimisation de la pipeline graphique</li><li>Shaders GLSL</li><li>Game design</li><li>Haxe</li></ul>\",\n        coverClass: \"image-wrapper vertical\",\n        cover: [\"img/yas0.jpg\", \"img/yas1.jpg\", \"img/yas2.jpg\", \"img/yas3.jpg\", \"img/yas4.jpg\", \"img/yas5.jpg\", \"img/yas6.jpg\", \"img/yas7.jpg\"]\n      },\n      {\n        name : \"Game Jam\",\n        description1 : \"<p>Jeu web intitulé <em>\\\"Save your diamond factory\\\"</em>, intégralement réalisé en 72h lors de l'évènement Ludum Dare 40 ayant pour thème : </p><p> <em>\\\"The more you have, the worse it gets\\\".</em></p><br/><p>Le jeu mixe les genres de Tower Defense et de jeu incrémental.</p>\",\n        description2 : \"<ul><li>Organisation</li><li>Prototypage dans un court laps de temps</li><li>Paradigme entité / composants</li><li>Game design</li></ul>\",\n        coverClass: \"image-wrapper\",\n        cover: [\"img/ld40.jpg\"]\n      }\n    ]\n  }\n\n  nextProject(){\n    this.title.au[\"polygon-transition\"].viewModel.next();\n    this.description.au[\"polygon-transition\"].viewModel.next();\n    this.cover.au[\"polygon-transition\"].viewModel.next();\n  }\n  \n  previousProject(){\n    this.title.au[\"polygon-transition\"].viewModel.previous();\n    this.description.au[\"polygon-transition\"].viewModel.previous();\n    this.cover.au[\"polygon-transition\"].viewModel.previous();\n  }\n\n  attached(){\n    let sliderElements = document.querySelectorAll('*[data-simple-slider]');\n    for(let slider of sliderElements){\n      let children = slider.querySelectorAll('img');\n      this.sliders.push(getSlider({\n        container: slider,\n        children: children,\n        duration: .5,\n        delay: 3.5,\n        end: -100,\n        init: 100,\n        ease: function(time, begin, change, duration) {\n          return change * ((time = time / duration - 1) * time * time + 1) + begin;\n        },\n        onChange: function(prev, index){\n          let controls = slider.querySelectorAll(\".cover-control\");\n          for(let c of controls){\n            c.classList.remove('active');\n          }\n          controls[index].classList.add('active');\n        }\n      }));\n      this.sliders[this.sliders.length-1].change(0);\n    }\n    this.ea.subscribe('resize', this.onresize.bind(this));\n    setTimeout(this.onresize.bind(this), 1000);\n    window.advanceProgress();\n  }\n\n  changeSlider(event, project, index){\n    this.sliders[this.projectData.indexOf(project)].change(index);\n  }\n\n  verticalImageStyle = \".vertical img{margin-left:calc(50% - \"+320+\"px);}\";\n  eachImageWrapper = [];\n  onresize(){\n    let verticalImages = document.querySelectorAll('.image-wrapper.vertical img');\n    \n    let adjustControls = function(){\n      for(let wrapper of this.eachImageWrapper){\n        let images = wrapper.querySelectorAll('img');\n        let h = images[0].clientHeight;\n        let control = wrapper.querySelector('.cover-control-container');\n        control.style.top = 'calc('+h+'px - 20px)';\n      }\n      let w = verticalImages[0].clientWidth / 2;\n      this.verticalImageStyle = \".vertical img{margin-left:calc(50% - \"+w+\"px);}\"\n    }.bind(this);\n    setTimeout(adjustControls, 450);\n    adjustControls();\n  }\n\n  activate(data){\n    this.index = data.index;\n  }\n}\n","import * as THREE from \"three\";\nimport { inject } from 'aurelia-framework';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport {TrackballControls} from '../TrackballControls';\nimport {ConvolutionShader} from '../threefix/shaders/ConvolutionShader';\nimport {CopyShader} from '../threefix/shaders/CopyShader';\nimport {FilmShader} from '../threefix/shaders/FilmShader';\nimport {FocusShader} from '../threefix/shaders/FocusShader';\nimport {BloomPass} from '../threefix/postprocessing/BloomPass';\nimport {FilmPass} from '../threefix/postprocessing/FilmPass';\nimport {MaskPass} from '../threefix/postprocessing/MaskPass';\nimport {RenderPass} from '../threefix/postprocessing/RenderPass';\nimport {ShaderPass} from '../threefix/postprocessing/ShaderPass';\nimport {EffectComposer} from '../threefix/postprocessing/EffectComposer';\nimport * as Detector from \"../Detector\";\nimport { LerpService } from \"services/lerp-service\";\n\n@inject(EventAggregator, LerpService)\nexport class ScreenSkills {\n  displayTitle=\"Compétences\"\n  \n  container = null;\n  eventAggregator;\n\n  inited = false;\n  ready = false;\n  paused = true;\n  canStart = false;\n\n  constructor(ea, lerp){\n    this.lerpService = lerp;\n    this.eventAggregator = ea;\n    this.eventAggregator.subscribe('resize', this.onresize.bind(this));\n    this.eventAggregator.subscribe(\"app-ready\", function(){this.canStart = true;}.bind(this));\n    if ( ! Detector.webgl ) Detector.addGetWebGLMessage({parent: this.container});\n    this.font = null;\n    let loadManager = new THREE.LoadingManager();\n    let loader = new THREE.FontLoader(loadManager);\n    this.discSprite = new THREE.TextureLoader(loadManager).load( 'img/disc.png' );\n    loader.load('fonts/roboto.json', function(font) {\n      this.font = font;\n    }.bind(this));\n    loadManager.onLoad = function(){\n      this.ready = true;\n      window.advanceProgress();\n    }.bind(this);\n    window.addEventListener('scroll', this.onscroll.bind(this));\n  }\n\n  activate(data){\n    this.index = data.index;\n  }\n\n  onresize(size){\n    if(this.inited){\n      let w = this.container.clientWidth;\n      let h = size.h;\n      this.renderer.setSize(w, h);\n      this.camera.aspect = w/h;\n      this.camera.updateProjectionMatrix();\n      this.controls.handleResize();\n      this.composer.reset();\n    }\n  }\n\n  onscroll(){\n    let top = this.container.offsetTop;\n    let bot = this.container.offsetTop + this.container.offsetHeight;\n    let screenTop =(window.pageYOffset || document.scrollTop)  - (document.clientTop || 0) || 0;\n    let screenBot = screenTop + window.innerHeight;\n\n    if((screenBot >= top) && (screenTop <= bot)){\n      this.paused = false;\n      window.removeEventListener('scroll', this.onscroll.bind(this));\n    }\n    else {\n      this.paused = true;\n    }\n  }\n\n  attached(){\n    let watchReady = null;\n    setInterval(function(){\n      if(this.ready && !this.inited && this.container != null && this.canStart){\n        this.startScene();\n        clearInterval(watchReady);\n      }\n    }.bind(this), 25);\n  }\n\n  startScene(){\n    //setup\n    this.textColor = new THREE.Color(0x5D0359);\n    this.hoverTextColor = new THREE.Color(0xFFFF00);\n    this.scene = new THREE.Scene();\n    this.camera = new THREE.PerspectiveCamera( 75, this.container.clientWidth / window.innerHeight, 0.1, 1000 );\n    this.renderer = new THREE.WebGLRenderer({antialias:true, alpha:true});\n    this.renderer.setPixelRatio( window.devicePixelRatio );\n    this.renderer.setSize( this.container.clientWidth, this.container.clientHeight );\n    this.renderer.setClearColor(0xffffff, 0);\n    this.renderer.autoClear = false;\n    this.container.appendChild( this.renderer.domElement );\n\n    //postprocessing\n    var renderModel = new THREE.RenderPass( this.scene, this.camera );\n    var effectBloom = new THREE.BloomPass(1.5, 25, undefined, 512);\n    effectBloom.autoclear = false;\n    var effectCopy = new THREE.ShaderPass( THREE.CopyShader );\n    effectCopy.renderToScreen = true;\n    var composer = new THREE.EffectComposer(this.renderer);\n    composer.addPass( renderModel );\n    composer.addPass( effectBloom );\n    composer.addPass( effectCopy );\n    effectCopy.clear = true;\n    this.composer = composer;\n    \n    //create base geometry\n    var skillsIco = new THREE.IcosahedronBufferGeometry(1, 5);\n    // skillsIco.mergeVertices();\n    // var mergedBufferGeom = new THREE.BufferGeometry().fromGeometry(skillsIco);\n    // skillsIco = mergedBufferGeom;\n    skillsIco.attributes.position.dynamic = true;\n    var colors = [];\n    var vertForces = [];\n    for(let p = 0; p < skillsIco.attributes.position.count; p++){\n      colors.push(0.0282,0.3718,0.6);\n      vertForces[p] = [];\n    }\n    skillsIco.addAttribute( 'color', new THREE.Float32BufferAttribute( colors, 3 ) )\n    skillsIco.attributes.color.dynamic = true;\n\n    //skills infos\n    let nskill = 0;\n    let getSkillInfos = function(name, value){\n      return {\n        name: name,\n        position:[],\n        value: value,\n        lines: [],\n        text: null,\n        verticesInfos: [],\n        curIdx:[],\n        nextVert: 0,\n        startTime: 500*nskill++,\n        hovered: false\n      }\n    }\n    var skills = [\n      getSkillInfos(\"HTML5\", 80),\n      getSkillInfos(\"CSS3\", 80),\n      getSkillInfos(\"Javascript ES5/ES6\", 70),\n      getSkillInfos(\"UML\", 45),\n      getSkillInfos(\"Java\", 65),\n      getSkillInfos(\"JavaFx\", 40),\n      getSkillInfos(\"C#\", 50),\n      getSkillInfos(\"GLSL\", 45),\n      getSkillInfos(\"git\", 65),\n      getSkillInfos(\"SQL\", 45),\n      getSkillInfos(\"Aurelia\", 70)\n    ];\n\n    //fibonacci sphere\n    var offset = 2.0 / skills.length;\n    var increment = Math.PI * (3 - Math.sqrt(5));\n    for(let i = 0; i < skills.length; i++){\n      var y = ((i * offset) - 1 ) + (offset * 0.5);\n      var r = Math.sqrt( 1 - Math.pow(y, 2));\n      var phi = ((i) % skills.length) * increment;\n\n      var x = Math.cos(phi) * r;\n      var z = Math.sin(phi) * r;\n      skills[i].position = [x,y,z];\n    }\n    \n    let\tlineMaterial = new THREE.LineBasicMaterial( { color: 0xffffff, vertexColors: THREE.VertexColors } );\n    let\ttextMaterial = new THREE.MeshLambertMaterial( { color: 0x5D0359} );\n    \n    //generate each skill \n    var rad = 0.6;\n    for(let j = 0; j < skills.length; j++){\n\n      // var sp = new THREE.SphereGeometry(rad, 32, 32);\n      // var spm = new THREE.Mesh(sp, new THREE.MeshBasicMaterial({color: new THREE.Color(1,0,0), opacity:0.05, transparent: true}));\n      // spm.position.fromArray(skills[j].position);\n      // this.scene.add(spm);\n\n      var pos = skillsIco.attributes.position;\n      var posVec = new THREE.Vector3(skills[j].position[0], skills[j].position[1], skills[j].position[2]);\n\n      skills[j].vertices = [];\n      skills[j].rad = rad;\n      //compute vertices deformation\n      for(let p = 0; p < pos.count; p++){\n        var vertx = pos.getX(p);\n        var verty = pos.getY(p);\n        var vertz = pos.getZ(p);\n        \n        var distSq = posVec.distanceToSquared(new THREE.Vector3(vertx, verty, vertz));\n        if(distSq < rad * rad){\n          if(vertx == 0) vertx =  0.00001;\n          var theta = Math.acos(vertz);\n          var phi = Math.atan(verty / (vertx));\n          var skillVal = skills[j].value / 100;\n          var normDist = 1 - distSq / (rad * rad);\n          skills[j].verticesInfos.push({\n            id: p,\n            dist: normDist,\n            timeStarted: null\n          });\n\n          var newRad = this.lerp(1, 1 + ( skillVal), normDist * normDist * normDist * normDist * normDist * normDist * normDist);\n\n          if(vertx < 0) {\n            theta = Math.PI * 2 - theta;\n          }\n          vertForces[p].push({\n            pos: new THREE.Vector3(\n              newRad * Math.sin(theta) * Math.cos(phi),\n              newRad * Math.sin(theta) * Math.sin(phi),\n              newRad * Math.cos(theta)\n            ),\n            power: skillVal,\n            dist: normDist\n          });\n        }\n      }\n      skills[j].verticesInfos.sort(function(a,b) {return a.dist-b.dist;});\n\n      let center = skills[j].position;\n      let length = 2 + 0.5 * Math.random();\n      let end = new THREE.Vector3(length * center[0], length * center[1], length * center[2]);\n      //create lines\n      for(let l = 0; l < 4; l++){\n        let lineGeom = new THREE.BufferGeometry();\n        lineGeom.addAttribute( 'position', new THREE.Float32BufferAttribute( [0,0,0, end.x, end.y, end.z ], 3 ) );\n        lineGeom.addAttribute( 'color', new THREE.Float32BufferAttribute( [1,0,0,1,0,0], 3 ) );\n        lineGeom.attributes.position.dynamic = true;\n        let line = new THREE.Line(lineGeom, lineMaterial);\n        skills[j].lines.push(line);\n        this.scene.add(line);\n      }\n\n      //create text\n      let textGeometry = new THREE.TextBufferGeometry(skills[j].name, {font: this.font});\n      let sc = 0.0015;\n      textGeometry.scale(sc,sc,sc/10);\n      textGeometry.computeBoundingBox();\n      let text = new THREE.Mesh(textGeometry, new THREE.MeshLambertMaterial( { color: this.textColor.clone()} ));\n      textGeometry.applyMatrix(new THREE.Matrix4().makeTranslation(-text.geometry.boundingBox.getSize(new THREE.Vector3()).x * 0.5,0,0));\n      text.position.set(end.x, end.y, end.z);\n      let bb = textGeometry.boundingBox;\n      let bbg = new THREE.BoxGeometry(bb.max.x - bb.min.x, bb.max.y - bb.min.y, bb.max.z - bb.min.z);\n      let bbm = new THREE.Mesh(bbg, new THREE.MeshBasicMaterial({transparent: true, opacity: 0}));\n      bbm.position.y = 0.06;\n      text.add(bbm)\n      this.scene.add(text);\n      \n      skills[j].text = text;\n    }\n\n    \n\n    //normalize and store vertices deformation\n    this.desiredPos = [];\n    for(let p = 0; p < pos.count; p++){\n      let sum = new THREE.Vector3();\n      if(vertForces[p].length == 0){\n        sum.set(pos.getX(p), pos.getY(p), pos.getZ(p));\n      }else if(vertForces[p].length == 2){\n        let p1 = vertForces[p][0].pos;\n        let p2 = vertForces[p][1].pos;\n        sum = sum.add(p1);\n        sum = sum.add(p2);\n        sum = sum.divideScalar(2);\n      }else{\n        sum = vertForces[p][0].pos;\n      }\n      this.desiredPos[p] = sum;\n    }\n    skillsIco.attributes.position.needsUpdate = true;\n    skillsIco.attributes.color.needsUpdate = true;\n\n    this.skillsOriginalPos = skillsIco.attributes.position.clone();\n\n    this.discSprite.premultiplyAlpha = true;\n    var material = new THREE.PointsMaterial( { map: this.discSprite, vertexColors: THREE.VertexColors, size: 0.04,  opacity: 1.0, transparent: true} );\n    material.alphaTest = 0.2;\n    this.skillsIcoMesh = new THREE.Points(skillsIco, material);\n\n    this.light = new THREE.PointLight(0xffffff, 1);\n    this.ambientLight = new THREE.AmbientLight(0xffffff, .8);\n\n    let controls = new THREE.TrackballControls( this.camera, this.container);\n    controls.rotateSpeed = 3.0;\n    controls.zoomSpeed = 1.2;\n    controls.noZoom = false;\n    controls.noPan = true;\n    controls.staticMoving = false;\n    controls.dynamicDampingFactor = 0.09;\n    controls.keys = [ 65, 83, 68 ];\n\n    this.controls = controls;\n    this.skills = skills;\n\n    this.controls.addEventListener('change', function(){\n      this.light.position.copy(this.camera.position);\n    }.bind(this));\n\n    this.scene.add( this.ambientLight );\n    this.scene.add( this.light );\n    this.scene.add( this.skillsIcoMesh );\n\n    var greySphere = new THREE.SphereGeometry(0.98, 64, 64);\n    var mat = new THREE.MeshBasicMaterial({color:new THREE.Color(0.008, 0.008, 0.008)});\n    this.scene.add(new THREE.Mesh(greySphere, mat));\n\n    var outerSphere = new THREE.SphereGeometry(150,64,64);\n    var r = 0.401833255;\n    var mat2 = new THREE.MeshBasicMaterial({color:new THREE.Color(r * 0.2627450980392157, r * 0.25882352941176473, r * 0.2627450980392157), side: THREE.DoubleSide});\n    this.scene.add(new THREE.Mesh(outerSphere, mat2));\n\n    this.raycaster = new THREE.Raycaster();\n    // let lineGeom = new THREE.BufferGeometry();\n    // lineGeom.addAttribute( 'position', new THREE.Float32BufferAttribute( [0,0,0, 0,0,3 ], 3 ) );\n    // lineGeom.addAttribute( 'color', new THREE.Float32BufferAttribute( [0,1,0,0,1,0], 3 ) );\n    // lineGeom.attributes.position.dynamic = true;\n    // this.rayLine = new THREE.Line(lineGeom, lineMaterial);\n    // this.scene.add(this.rayLine);\n\n    this.camera.position.z = 4;\n    this.timeStarted = Date.now();\n    this.lastUpdate = Date.now();\n    this.mouse = {x:0, y:0};\n    this.renderer.domElement.addEventListener('mousemove', this.onmousemove.bind(this), false);\n    this.renderer.domElement.addEventListener('mouseup', this.onmouseclick.bind(this), false);\n    this.inited = true;\n    this.update();\n  }\n\n  mouseJustPressed = false;\n  onmouseclick(event){\n    event.preventDefault();\n    this.mouseJustPressed = true;\n  }\n\n  onmousemove(event){\n    event.preventDefault();\n    this.mouse.x = ((event.clientX-8) / this.renderer.domElement.clientWidth) * 2 - 1;\n    this.mouse.y = -(event.clientY / this.renderer.domElement.clientHeight) * 2 + 1;\n  }\n\n  timeStarted;\n  lastUpdate;\n  totalTime = 0.0;\n  dt;\n  startAt = 0;\n  update(){\n    if(!this.paused){\n      let now = Date.now();\n      this.dt = now - this.lastUpdate;\n      this.lastUpdate = now;\n      this.totalTime += this.dt;\n\n      this.controls.update();\n\n      for(let skill of this.skills){\n        let lastVertice = skill.verticesInfos[skill.verticesInfos.length -1 ];\n        if(this.totalTime < skill.startTime || lastVertice.timeStarted != null && (this.totalTime - lastVertice.timeStarted > 2000)) continue;\n        let j = 0\n        while(skill.nextVert < skill.verticesInfos.length && j++ < 15){\n          skill.verticesInfos[skill.nextVert++].timeStarted = this.totalTime;\n        }\n        for(let i = this.startAt; i < skill.nextVert; i++){\n          let vert = skill.verticesInfos[i];\n          let vertId = vert.id;\n          \n          let posCoef = (this.totalTime - vert.timeStarted) / 750;\n          posCoef = 3 * posCoef * (1-posCoef) * (1-posCoef);\n          if(posCoef > 1) posCoef = 1;\n          this.skillsIcoMesh.geometry.attributes.position.setX(vertId, this.lerp(this.skillsOriginalPos.getX(vertId), this.desiredPos[vertId].x, posCoef));\n          this.skillsIcoMesh.geometry.attributes.position.setY(vertId, this.lerp(this.skillsOriginalPos.getY(vertId), this.desiredPos[vertId].y, posCoef));\n          this.skillsIcoMesh.geometry.attributes.position.setZ(vertId, this.lerp(this.skillsOriginalPos.getZ(vertId), this.desiredPos[vertId].z, posCoef));\n          \n          let colCoef = (this.totalTime - vert.timeStarted) / 2000;\n          if(colCoef > 1) colCoef = 1;\n          colCoef = 6.7*colCoef * (1-colCoef)* (1-colCoef);\n          this.skillsIcoMesh.geometry.attributes.color.setX(vertId, this.lerp(0.0282, 1, colCoef));\n          this.skillsIcoMesh.geometry.attributes.color.setY(vertId, this.lerp(0.3718, 1, colCoef));\n          this.skillsIcoMesh.geometry.attributes.color.setZ(vertId, this.lerp(0.6, 1, colCoef));\n          if(colCoef >= 1) this.startAt = i;\n        }\n      }\n\n      //update text orientation\n      for(let sk of this.skills){\n        sk.text.quaternion.copy(this.camera.quaternion);\n      }\n\n      let bounce = function(skill){\n        let loop = true;\n        let i = skill.verticesInfos.length;\n        let range = 25;\n        while(loop){\n          if(i <0 ) break;\n          let end = i;\n          let start = Math.max(0, i - range);\n          this.lerpService.addEasing(function(t){\n            t = 7 * t * (1-t) * (1-t);\n            if(t > 1) t = 1;\n            for(let j = start; j < end; j++){\n              let vert = skill.verticesInfos[j];\n              let vertId = vert.id;\n              this.skillsIcoMesh.geometry.attributes.position.setX(vertId, this.lerp(this.skillsOriginalPos.getX(vertId), this.desiredPos[vertId].x, 1-t));\n              this.skillsIcoMesh.geometry.attributes.position.setY(vertId, this.lerp(this.skillsOriginalPos.getY(vertId), this.desiredPos[vertId].y, 1-t));\n              this.skillsIcoMesh.geometry.attributes.position.setZ(vertId, this.lerp(this.skillsOriginalPos.getZ(vertId), this.desiredPos[vertId].z, 1-t));\n\n              // let colCoef = (this.totalTime - vert.timeStarted) / 2000;\n              // if(colCoef > 1) colCoef = 1;\n              // colCoef = 6.7*colCoef * (1-colCoef)* (1-colCoef);\n              this.skillsIcoMesh.geometry.attributes.color.setX(vertId, this.lerp(0.0282, 1, t));\n              this.skillsIcoMesh.geometry.attributes.color.setY(vertId, this.lerp(0.3718, 1, t));\n              this.skillsIcoMesh.geometry.attributes.color.setZ(vertId, this.lerp(0.6, 1, t));\n            }\n          }, 1000, this, ~~((skill.verticesInfos.length - end) / range) * 10)\n          i -= range;\n        }\n      }.bind(this);\n\n      this.raycaster.setFromCamera(this.mouse, this.camera);\n      for(let skill of this.skills){\n        let isect = this.raycaster.intersectObject(skill.text, true);\n        if(isect != null && isect.length > 0 && this.totalTime > 1000){\n          if(!skill.hovered){\n            skill.hovered = true;\n            this.lerpService.addEasing(function(t){\n                t = 1 - (1-t) * (1-t) * (1-t);\n                skill.text.material.color.r = this.lerp(this.textColor.r, this.hoverTextColor.r, t);\n                skill.text.material.color.g = this.lerp(this.textColor.g, this.hoverTextColor.g, t);\n                skill.text.material.color.b = this.lerp(this.textColor.b, this.hoverTextColor.b, t);\n            }, 500, this);\n            bounce(skill);\n          }\n          if(this.mouseJustPressed){\n            bounce(skill);\n          }\n        }else{\n          if(skill.hovered){\n            skill.hovered = false;\n            this.lerpService.addEasing(function(t){\n                t = t * t * t;\n                skill.text.material.color.r = this.lerp(this.hoverTextColor.r, this.textColor.r, t);\n                skill.text.material.color.g = this.lerp(this.hoverTextColor.g, this.textColor.g, t);\n                skill.text.material.color.b = this.lerp(this.hoverTextColor.b, this.textColor.b, t);\n            }, 500, this);\n          }\n        }\n        this.skillsIcoMesh.geometry.attributes.position.needsUpdate = true;\n        this.skillsIcoMesh.geometry.attributes.color.needsUpdate = true;\n      }\n\n      this.mouseJustPressed = false;\n      // this.processEasings(this.dt);\n\n      this.composer.render(0.01);\n    }\n    requestAnimationFrame(this.update.bind(this));\n  }\n\n  // addEasing(func, duration, delay = 0){\n  //   setTimeout(function(){\n  //     this.easingInfos.push({\n  //       func: func.bind(this),\n  //       started: this.totalTime,\n  //       duration: duration\n  //     });\n  //   }.bind(this), delay);\n  // }\n\n  // easingInfos = [];\n  // processEasings(){\n  //   let toRemove = [];\n  //   for(let ease of this.easingInfos){\n  //     let t = (this.totalTime - ease.started) / ease.duration;\n  //     if(t < 1){\n  //       ease.func(t);\n  //     }else{\n  //       toRemove.push(ease);\n  //     }\n  //   }\n  //   for(let rem of toRemove){\n  //     this.easingInfos.splice(this.easingInfos.indexOf(rem), 1);\n  //   }\n  // }\n\n  lerp(a, b, position) { return ((1.0 - position) * a) + (position * b); }\n\n}\n","let instance = null;\n\nexport class LerpService{\n\n  idCounter = 0;\n\n  constructor(){\n    if(instance == null){\n      instance = this;\n      this.processEasings();\n    }\n    return instance;\n  }\n\n  addEasing(func, duration, scope, delay = 0, onFinish = null){\n    let infos = {\n      func: func.bind(scope),\n      started: 0,\n      duration: duration,\n      onFinish: onFinish,\n      canceled: false\n    }\n    setTimeout(function(){\n      infos.started = Date.now();\n      this.easingInfos.push(infos);\n    }.bind(this), delay);\n    return function(){\n      let index = this.easingInfos.indexOf(infos);\n      infos.canceled = true;\n      if(index > -1)\n        this.toRemove.push(infos);\n    }.bind(this);\n  }\n\n  easingInfos = [];\n  toRemove = [];\n  processEasings(){\n    let now = Date.now();\n    for(let ease of this.easingInfos){\n      let t = (now - ease.started) / ease.duration;\n      if(t < 1){\n        if(!ease.canceled)\n          ease.func(t);\n      }else{\n        if(!ease.canceled)\n          ease.func(1); //ensure that the ease function is last called with 1\n        this.toRemove.push(ease);\n        if(ease.onFinish != null) ease.onFinish();\n      }\n    }\n    for(let rem of this.toRemove){\n      this.easingInfos.splice(this.easingInfos.indexOf(rem), 1);\n    }\n    this.toRemove = [];\n    requestAnimationFrame(this.processEasings.bind(this));\n  }\n\n  lerp(a, b, position) { return ((1.0 - position) * a) + (position * b); }\n}\n","\nimport {inject, customAttribute, bindable, DOM} from 'aurelia-framework';\nimport { LerpService } from '../../services/lerp-service';\n\n@customAttribute('polygon-transition')\n@inject(DOM.Element, LerpService)\nexport class PolygonTransition {\n  @bindable direction=1;\n  @bindable orientation='vertical';\n\n  rotX = 0;\n  rotY = 0;\n  rotZ = 0;\n\n  constructor(element, lerp) {\n    this.lerpService = lerp;\n    this.element = element;\n    this.element.position = \"relative\";\n    window.addEventListener('resize', this.onresize.bind(this));\n  }\n  \n  attached(){\n    \n    this.faces = [];\n    let faceCount = this.element.children.length;\n    this.faceCount = faceCount;\n\n    let wrapper = document.createElement('div');\n    this.element.appendChild(wrapper);\n    for(let i = 0; i<this.faceCount; i++){\n      let c = this.element.children[0]\n      this.faces.push(c);\n      wrapper.appendChild(c);\n    }\n    this.element.style.perspective = \"500px\";\n    var w = this.element.clientWidth;\n    var h = this.element.clientHeight;\n    wrapper.style.width = w+\"px\";\n    wrapper.style.height = h+\"px\";\n    this.wrapper = wrapper;\n\n    this.wrapper.style.transformStyle = \"preserve-3d\";\n    this.wrapper.style.transition = \"transform 0.35s ease-out\";\n\n    this.initialize();\n\n    window.addEventListener(\"keydown\", function(ev){\n      switch(ev.key){\n          case 'ArrowRight':\n          this.next();\n          break;\n          case 'ArrowLeft':\n          this.previous();\n          break;\n      }\n    }.bind(this));\n  }\n  \n  next(){\n    if(this.orientation == \"vertical\"){\n      this.rotX += this.angle;\n    }else{\n      this.rotY += this.angle;\n    }\n    this.wrapper.style.transform = \"translateZ(\"+(-40 + this.distZ * -1)+\"px)rotateX(\"+this.rotX+\"deg)rotateY(\"+this.rotY+\"deg)rotateZ(\"+this.rotZ+\"deg)\";\n    setTimeout(function(){\n      this.wrapper.style.transform = \"translateZ(\"+(this.distZ * -1)+\"px)rotateX(\"+this.rotX+\"deg)rotateY(\"+this.rotY+\"deg)rotateZ(\"+this.rotZ+\"deg)\";\n    }.bind(this), 200);\n  }\n  \n  previous(){\n    if(this.orientation == \"vertical\"){\n      this.rotX -= this.angle;\n    }else{\n      this.rotY -= this.angle;\n    }\n    this.wrapper.style.transform = \"translateZ(\"+(-40+this.distZ * -1)+\"px)rotateX(\"+this.rotX+\"deg)rotateY(\"+this.rotY+\"deg)rotateZ(\"+this.rotZ+\"deg)\";\n    setTimeout(function(){\n      this.wrapper.style.transform = \"translateZ(\"+(this.distZ * -1)+\"px)rotateX(\"+this.rotX+\"deg)rotateY(\"+this.rotY+\"deg)rotateZ(\"+this.rotZ+\"deg)\";\n    }.bind(this), 200);\n  }\n\n  resizeID = null;\n  resizeID2 = null;\n  onresize(){\n    clearTimeout(this.resizeID);\n    this.resizeID = setTimeout(this.initialize.bind(this), 50);\n    clearTimeout(this.resizeID2);\n    this.resizeID2 = setTimeout(this.initialize.bind(this), 70);\n  }\n\n  initialize(){\n    let dir = parseInt(this.direction);\n    let angle = dir * 360 / this.faceCount;\n    let size = this.orientation == \"vertical\" ? this.faces[0].clientHeight : this.faces[0].clientWidth;\n    let distZ = ((size / 2) / Math.tan(Math.PI / this.faceCount));\n    this.distZ = distZ;\n    this.angle = angle;\n\n\n    var w = this.element.clientWidth;\n    var h = this.element.clientHeight;\n    this.wrapper.style.transition = \"all 0.1s linear\";\n    this.wrapper.style.width = w+\"px\";\n    this.wrapper.style.height = h+\"px\";\n    \n    for(let i = 0; i < this.faceCount; i++){\n      let face = this.faces[i];\n      let rot = -this.angle * i;\n      face.style.position = \"absolute\";\n      face.style.transform = (this.orientation == 'vertical' ? 'rotateX(' : 'rotateY(') + rot + \"deg)\"+\" translateZ(\"+ (this.distZ) +\"px)\";\n    }\n    this.wrapper.style.transform = \"translateZ(\"+(this.distZ * -1)+\"px)rotateX(\"+this.rotX+\"deg)rotateY(\"+this.rotY+\"deg)rotateZ(\"+this.rotZ+\"deg)\";\n    this.wrapper.style.transition = \"transform 0.35s ease-out\";\n  }\n}\n","\nimport {inject, customAttribute, DOM} from 'aurelia-framework';\nimport { LerpService } from '../../services/lerp-service';\n\n@customAttribute('scroll-next')\n@inject(DOM.Element, LerpService)\nexport class ScrollNext {\n\n  constructor(element, lerp) {\n    this.lerpService = lerp;\n    this.element = element;\n  }\n\n  attached(){\n\n    let nextBtn = document.createElement('div');\n    nextBtn.classList.add('btn');\n    nextBtn.classList.add('btn-hidden');\n    nextBtn.classList.add('btn-next');\n    this.nextBtn = nextBtn;\n    this.element.appendChild(nextBtn);\n\n    setTimeout(function(){\n      this.nextBtn.classList.remove('btn-hidden');\n    }.bind(this), 2000);\n\n    this.nextBtn.onclick = this.toNext.bind(this);\n  }\n\n  toNext(){\n    let y = (window.pageYOffset || document.scrollTop)  - (document.clientTop || 0) || 0;\n    this.lerpService.addEasing(function(t){\n      window.scrollTo(0, this.lerpService.lerp(y, window.innerHeight * this.index, 1 - (1-t) * (1-t) * (1-t)));\n    }, 1000, this);\n  }\n\n  valueChanged(newValue, oldValue) {\n    this.index = parseInt(newValue);\n  }\n\n}\n","import {inject, customAttribute, DOM} from 'aurelia-framework';\nimport { LerpService } from '../../services/lerp-service';\n\n@customAttribute('scroll-target')\n@inject(DOM.Element, LerpService)\nexport class ScrollTarget {\n\n  index = 0;\n\n  constructor(element, lerp) {\n    this.lerpService = lerp;\n    this.element = element;\n    this.smoothScrollId = null;\n    let cancelNext = false;\n    let lastY = 0;\n    window.addEventListener('scroll', function(event){\n      let y = (window.pageYOffset || document.scrollTop)  - (document.clientTop || 0) || 0;\n      let dir = y - lastY;\n      if(cancelNext){\n        clearTimeout(this.smoothScrollId);\n        event.preventDefault = true;\n        return;\n      }\n      lastY = y;\n      clearTimeout(this.smoothScrollId);\n      this.smoothScrollId = setTimeout(function(){\n        let ratio = 1 + y / (window.innerHeight);\n        if(Math.abs(dir) < 15 && dir > 0 && ratio > this.index && ratio < this.index + 1\n          || Math.abs(dir) < 15 && dir < 0 && ratio > this.index && ratio < this.index+1){\n            let indexTweak = dir < 0 ? -1 : 0;\n            cancelNext = true;\n            this.lerpService.addEasing(function(t){\n              window.scrollTo(0, this.lerpService.lerp(y, window.innerHeight * (this.index + indexTweak), 1-(1-t)*(1-t)*(1-t)));\n              cancelNext = true;\n            }, 1000, this, null, function(){\n              clearTimeout(this.smoothScrollId);\n              this.smoothScrollId = null;\n              cancelNext = true;\n              setTimeout(()=>cancelNext = false, 20);\n            });\n        }\n      }.bind(this), 50);\n    }.bind(this));\n  }\n\n  valueChanged(newValue, oldValue) {\n    this.index = parseInt(newValue);\n  }\n\n}\n","\nimport {inject, customAttribute, DOM} from 'aurelia-framework';\nimport { LerpService } from '../../services/lerp-service';\n\n@customAttribute('scroll-transform')\n@inject(DOM.Element, LerpService)\nexport class ScrollTransform {\n\n  index = 0;\n\n  constructor(element, lerp) {\n    this.lerpService = lerp;\n    this.element = element;\n    this.isChrome = !!window.chrome && !! window.chrome.webstore;\n    if(this.isChrome){\n      window.addEventListener('scroll', function(event){\n        \n        let y = (window.pageYOffset || document.scrollTop)  - (document.clientTop || 0) || 0;\n        let ratio = (1 + y / (window.innerHeight)) - this.index;\n        let rotateAmount = 180;\n        let from = 0;\n        let to = 90;\n        if(ratio >= 0 && ratio < 1){\n          element.style.transformOrigin = \"center bottom 0px\";\n          from = 0;\n          to = 90;\n        }else if(ratio > -1 && ratio < 0){\n          element.style.transformOrigin = \"center top 0px\";\n          from = -90;\n          to = 0;\n          ratio = 1 - ratio *- 1;\n        }\n        if(ratio > 1) ratio = 1;\n        if(ratio < 0) ratio = 0;\n        \n        rotateAmount = this.lerpService.lerp(from, to, ratio);\n        this.element.style.transform = \"perspective(675px)rotateX(\"+rotateAmount+\"deg)\";\n      }.bind(this));\n    }\n  }\n\n  valueChanged(newValue, oldValue) {\n    this.index = parseInt(newValue);\n  }\n\n}\n","import {inject, customElement} from \"aurelia-framework\";\nimport { EventAggregator } from 'aurelia-event-aggregator';\n\n@inject(EventAggregator)\nexport class ConsoleSection{\n  \n  state = 0;\n  lines = [\n    \"Bonjour,\",\n    \"Je m'appelle Mathieu Emilian\",\n    \"Je suis développeur\",\n    \"J'aime travailler sur des projets créatifs\", \" \"\n  ];\n\n  _console;\n  carret;\n  carretInterval;\n  typingInterval;\n  typingSpeed = 35;\n  linePauseDuration = 700;\n\n  currentLineIdx = 0;\n  currentCharIdx = 0;\n  linesElements = [];\n  canStart = false;\n\n  constructor(ea){\n    this.ea = ea;\n  }\n \n  attached(){\n    this.linesElements = this._console.getElementsByClassName('line');\n    this.typingInterval = setInterval(this.type.bind(this), this.typingSpeed);\n    this.carret.parentElement.removeChild(this.carret);\n    this.linesElements[0].appendChild(this.carret);\n    this.ea.subscribe('app-ready', function(){\n      window.setTimeout(function(){\n        this.canStart = true;\n      }.bind(this), 800);\n    }.bind(this));\n  }\n\n  createCharSpan(char){\n    let span = document.createElement(\"span\");\n    if(char != \" \")\n      span.classList.add('console-letter');\n    span.textContent = char;\n\n    return span;\n  }\n\n  startWordSwitch(){\n    this.words = [];\n    let oldWord = document.getElementsByClassName('strong-word')[2];\n    while(oldWord.childElementCount > 0) oldWord.firstChild.remove();\n    let i = 0;\n    for(let word of [\"créatifs   \", \"interactifs\", \"innovants  \"]){\n      let wordElement = document.createElement('span');\n      wordElement.classList.add('word-switch');\n      for(let char of word){\n        let span = this.createCharSpan(char);\n        wordElement.appendChild(span);\n        span.style.transform = i == 0 ? \"rotateX(0deg)\" : i == 1 ? \"rotateX(90deg)\" : \"rotateX(-90deg)\";\n      }\n      oldWord.appendChild(wordElement);\n      this.words.push(wordElement);\n      i++;\n    }\n    this.wordSwitchInterval = setInterval(this.wordSwitch.bind(this), 1500);\n    this.wordSwitch();\n  }\n\n  currentWordIdx = 0;\n  wordSwitch(){\n    let nextWordIdx = (this.currentWordIdx + 1) % 3;\n    let i = 0;\n    for(let child of this.words[this.currentWordIdx].children){\n      child.style.transformOrigin = 'bottom';\n      setTimeout( () => child.style.transform = 'rotateX(-90deg)', i++*60);    \n    }\n    i = 0;\n    for(let child of this.words[nextWordIdx].children){\n      child.style.transformOrigin = 'top';\n      setTimeout( () => child.style.transform = 'rotateX(0deg)', i++*60);\n    }\n    this.currentWordIdx = nextWordIdx;\n  }\n\n  pauseTimer = 0;\n  parentOverride = null;\n  type(){\n    //pause between each line\n    if(this.paused && Date.now() - this.pausedTime > this.linePauseDuration){\n      this.paused = false;\n    }\n\n    if(!this.canStart || this.paused) return;\n\n    //stop typing\n    if(this.currentLineIdx >= this.lines.length){\n      this.paused = true;\n      clearInterval(this.typingInterval);\n      this.blink();\n      this.carretInterval = setInterval(this.blink.bind(this), 1200);\n      this.startWordSwitch();\n      let letters = document.getElementsByClassName(\"console-letter\");\n      for(let letter of letters){\n        if(letter.parentElement.classList.contains('word-switch')) continue;\n        letter.addEventListener('mouseover', function(ev){\n          let dx = Math.floor(Math.random() * 100 - 50);\n          let dy = Math.floor(Math.random() * 100 - 50);\n          letter.style.transform = 'translate('+dx+'px,'+dy+'px)';\n          setTimeout(function(){\n            letter.style.transform='translate(0,0)';\n          },1200);\n        });\n      }\n      this.ea.publish('typing-finished');\n      return;\n    }\n\n    //watch for next line\n    if(this.currentCharIdx >= this.lines[this.currentLineIdx].length){\n      this.currentLineIdx++;\n      this.currentCharIdx = 0;\n      this.paused = true;\n      this.pausedTime = Date.now();\n      this.parentOverride = null;\n      return;\n    }\n\n    //create and append current char\n    let line = this.lines[this.currentLineIdx];\n    let parent = this.linesElements[this.currentLineIdx];\n    if(this.currentLineIdx === 1 && line.substring(this.currentCharIdx) == \"Mathieu Emilian\"\n    || this.currentLineIdx === 2 && line.substring(this.currentCharIdx) == \"développeur\"\n    || this.currentLineIdx === 3 && line.substring(this.currentCharIdx) == \"créatifs\"){\n      let highlightContainer = document.createElement('span');\n      highlightContainer.classList.add('strong-word');\n      parent.appendChild(highlightContainer);\n      this.parentOverride = highlightContainer;\n    }\n    if(this.parentOverride != null) parent = this.parentOverride;\n    let char = line.charAt(this.currentCharIdx);\n    let span = this.createCharSpan(char);\n    parent.appendChild(span);\n    \n    //move carret\n    this.carret.parentElement.removeChild(this.carret);\n    this.linesElements[this.currentLineIdx].appendChild(this.carret);\n    this.currentCharIdx++;\n  }\n\n  //carret blink\n  blink(){\n    if(!this.paused){\n      this.carret.style.opacity = 1;\n      return;      \n    }\n    this.carret.style.opacity = 0;\n    setTimeout(function(){\n      this.carret.style.opacity = 1;\n    }.bind(this), 600)\n  }\n\n}\n","import {inject, customElement, bindable} from 'aurelia-framework';\nimport { LerpService } from '../../services/lerp-service';\n\n@inject(LerpService)\n@customElement('menu-bar')\nexport class MenuBar{\n  @bindable titles;\n  mouseY = 0;\n  wasMouseInRange = false;\n  constructor(ls){\n    this.lerpService = ls;\n  }\n\n  attached(){\n    window.addEventListener('mousemove', function(event){\n      this.mouseY = event.clientY;\n      \n      if(this.mouseY < 35){\n        this.wasMouseInRange = true;\n        this.menu.style.height = \"21px\";\n      }else if(this.wasMouseInRange){\n        this.wasMouseInRange = false;\n        this.menu.style.height = 0;\n      }\n    }.bind(this));\n    window.addEventListener('scroll', this.updateProgress.bind(this));\n    this.updateProgress();\n    this.current.style.width = (100 / this.titles.length) + \"%\";\n  }\n\n  updateProgress(){\n    let y = (window.pageYOffset || document.scrollTop)  - (document.clientTop || 0) || 0;\n    let h = document.body.scrollHeight;\n    this.foreground.style.width = (y * 100 / h) + \"%\";\n  }\n\n  goToScreen(index){\n    let y = (window.pageYOffset || document.scrollTop)  - (document.clientTop || 0) || 0;\n    this.lerpService.addEasing(function(t){\n      window.scrollTo(0, this.lerpService.lerp(y, window.innerHeight * (index - 1), 1 - (1-t) * (1-t) * (1-t)));\n    }, 1000, this);\n  }\n}\n","import { inject } from 'aurelia-framework';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport { LerpService } from '../../services/lerp-service';\n\n@inject(EventAggregator, LerpService)\nexport class ProjectShowcase{\n\n  constructor(ea, ls){\n    this.lerpService = ls;\n    this.ea = ea;\n    this.ea.subscribe('update-project-transform', this.updateTransform.bind(this));\n  }\n\n  activate(data){\n    this.data = data;\n  }\n\n  \n\n  attached(){\n    this.updateTransform({ direction: 'prev',\n      prevActive : this.data.parent.prevActiveIndex,\n      active: this.data.parent.activeIndex,\n      previous: this.data.parent.previousIndex,\n      next: this.data.parent.nextIndex\n    });\n  }\n\n  \n}\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\nimport * as THREE from \"three\";\nimport {EffectComposer} from 'threefix/postprocessing/EffectComposer';\n\nTHREE.BloomPass = function ( strength, kernelSize, sigma, resolution ) {\n\n\tTHREE.Pass.call( this );\n\n\tstrength = ( strength !== undefined ) ? strength : 1;\n\tkernelSize = ( kernelSize !== undefined ) ? kernelSize : 25;\n\tsigma = ( sigma !== undefined ) ? sigma : 4.0;\n\tresolution = ( resolution !== undefined ) ? resolution : 256;\n\n\t// render targets\n\n\tvar pars = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat };\n\n\tthis.renderTargetX = new THREE.WebGLRenderTarget( resolution, resolution, pars );\n\tthis.renderTargetX.texture.name = \"BloomPass.x\";\n\tthis.renderTargetY = new THREE.WebGLRenderTarget( resolution, resolution, pars );\n\tthis.renderTargetY.texture.name = \"BloomPass.y\";\n\n\t// copy material\n\n\tif ( THREE.CopyShader === undefined )\n\t\tconsole.error( \"THREE.BloomPass relies on THREE.CopyShader\" );\n\n\tvar copyShader = THREE.CopyShader;\n\n\tthis.copyUniforms = THREE.UniformsUtils.clone( copyShader.uniforms );\n\n\tthis.copyUniforms[ \"opacity\" ].value = strength;\n\n\tthis.materialCopy = new THREE.ShaderMaterial( {\n\n\t\tuniforms: this.copyUniforms,\n\t\tvertexShader: copyShader.vertexShader,\n\t\tfragmentShader: copyShader.fragmentShader,\n\t\tblending: THREE.AdditiveBlending,\n\t\ttransparent: true\n\n\t} );\n\n\t// convolution material\n\n\tif ( THREE.ConvolutionShader === undefined )\n\t\tconsole.error( \"THREE.BloomPass relies on THREE.ConvolutionShader\" );\n\n\tvar convolutionShader = THREE.ConvolutionShader;\n\n\tthis.convolutionUniforms = THREE.UniformsUtils.clone( convolutionShader.uniforms );\n\n\tthis.convolutionUniforms[ \"uImageIncrement\" ].value = THREE.BloomPass.blurX;\n\tthis.convolutionUniforms[ \"cKernel\" ].value = THREE.ConvolutionShader.buildKernel( sigma );\n\n\tthis.materialConvolution = new THREE.ShaderMaterial( {\n\n\t\tuniforms: this.convolutionUniforms,\n\t\tvertexShader:  convolutionShader.vertexShader,\n\t\tfragmentShader: convolutionShader.fragmentShader,\n\t\tdefines: {\n\t\t\t\"KERNEL_SIZE_FLOAT\": kernelSize.toFixed( 1 ),\n\t\t\t\"KERNEL_SIZE_INT\": kernelSize.toFixed( 0 )\n\t\t}\n\n\t} );\n\n\tthis.needsSwap = false;\n\n\tthis.camera = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\tthis.scene  = new THREE.Scene();\n\n\tthis.quad = new THREE.Mesh( new THREE.PlaneBufferGeometry( 2, 2 ), null );\n\tthis.quad.frustumCulled = false; // Avoid getting clipped\n\tthis.scene.add( this.quad );\n\n};\n\nTHREE.BloomPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {\n\n\tconstructor: THREE.BloomPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tif ( maskActive ) renderer.context.disable( renderer.context.STENCIL_TEST );\n\n\t\t// Render quad with blured scene into texture (convolution pass 1)\n\n\t\tthis.quad.material = this.materialConvolution;\n\n\t\tthis.convolutionUniforms[ \"tDiffuse\" ].value = readBuffer.texture;\n\t\tthis.convolutionUniforms[ \"uImageIncrement\" ].value = THREE.BloomPass.blurX;\n\n\t\trenderer.render( this.scene, this.camera, this.renderTargetX, true );\n\n\n\t\t// Render quad with blured scene into texture (convolution pass 2)\n\n\t\tthis.convolutionUniforms[ \"tDiffuse\" ].value = this.renderTargetX.texture;\n\t\tthis.convolutionUniforms[ \"uImageIncrement\" ].value = THREE.BloomPass.blurY;\n\n\t\trenderer.render( this.scene, this.camera, this.renderTargetY, true );\n\n\t\t// Render original scene with superimposed blur to texture\n\n\t\tthis.quad.material = this.materialCopy;\n\n\t\tthis.copyUniforms[ \"tDiffuse\" ].value = this.renderTargetY.texture;\n\n\t\tif ( maskActive ) renderer.context.enable( renderer.context.STENCIL_TEST );\n\n    renderer.render( this.scene, this.camera, readBuffer, this.clear );\n    \n\t}\n\n} );\n\nTHREE.BloomPass.blurX = new THREE.Vector2( 0.001953125, 0.0 );\nTHREE.BloomPass.blurY = new THREE.Vector2( 0.0, 0.001953125 );\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\nimport * as THREE from \"three\";\n\nTHREE.EffectComposer = function ( renderer, renderTarget ) {\n\n\tthis.renderer = renderer;\n\n\tif ( renderTarget === undefined ) {\n\n\t\tvar parameters = {\n\t\t\tminFilter: THREE.LinearFilter,\n\t\t\tmagFilter: THREE.LinearFilter,\n\t\t\tformat: THREE.RGBAFormat,\n\t\t\tstencilBuffer: false\n\t\t};\n\n\t\tvar size = renderer.getDrawingBufferSize();\n\t\trenderTarget = new THREE.WebGLRenderTarget( size.width, size.height, parameters );\n\t\trenderTarget.texture.name = 'EffectComposer.rt1';\n\n\t}\n\n\tthis.renderTarget1 = renderTarget;\n\tthis.renderTarget2 = renderTarget.clone();\n\tthis.renderTarget2.texture.name = 'EffectComposer.rt2';\n\n\tthis.writeBuffer = this.renderTarget1;\n\tthis.readBuffer = this.renderTarget2;\n\n\tthis.passes = [];\n\n\t// dependencies\n\n\tif ( THREE.CopyShader === undefined ) {\n\n\t\tconsole.error( 'THREE.EffectComposer relies on THREE.CopyShader' );\n\n\t}\n\n\tif ( THREE.ShaderPass === undefined ) {\n\n\t\tconsole.error( 'THREE.EffectComposer relies on THREE.ShaderPass' );\n\n\t}\n\n\tthis.copyPass = new THREE.ShaderPass( THREE.CopyShader );\n\n};\n\nObject.assign( THREE.EffectComposer.prototype, {\n\n\tswapBuffers: function () {\n\n\t\tvar tmp = this.readBuffer;\n\t\tthis.readBuffer = this.writeBuffer;\n\t\tthis.writeBuffer = tmp;\n\n\t},\n\n\taddPass: function ( pass ) {\n\n\t\tthis.passes.push( pass );\n\n\t\tvar size = this.renderer.getDrawingBufferSize();\n\t\tpass.setSize( size.width, size.height );\n\n\t},\n\n\tinsertPass: function ( pass, index ) {\n\n\t\tthis.passes.splice( index, 0, pass );\n\n\t},\n\n\trender: function ( delta ) {\n\n\t\tvar maskActive = false;\n\n\t\tvar pass, i, il = this.passes.length;\n\n\t\tfor ( i = 0; i < il; i ++ ) {\n\n\t\t\tpass = this.passes[ i ];\n\n\t\t\tif ( pass.enabled === false ) continue;\n\n\t\t\tpass.render( this.renderer, this.writeBuffer, this.readBuffer, delta, maskActive );\n\n\t\t\tif ( pass.needsSwap ) {\n\n\t\t\t\tif ( maskActive ) {\n\n\t\t\t\t\tvar context = this.renderer.context;\n\n\t\t\t\t\tcontext.stencilFunc( context.NOTEQUAL, 1, 0xffffffff );\n\n\t\t\t\t\tthis.copyPass.render( this.renderer, this.writeBuffer, this.readBuffer, delta );\n\n\t\t\t\t\tcontext.stencilFunc( context.EQUAL, 1, 0xffffffff );\n\n\t\t\t\t}\n\n\t\t\t\tthis.swapBuffers();\n\n\t\t\t}\n\n\t\t\tif ( THREE.MaskPass !== undefined ) {\n\n\t\t\t\tif ( pass instanceof THREE.MaskPass ) {\n\n\t\t\t\t\tmaskActive = true;\n\n\t\t\t\t} else if ( pass instanceof THREE.ClearMaskPass ) {\n\n\t\t\t\t\tmaskActive = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\treset: function ( renderTarget ) {\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\tvar size = this.renderer.getDrawingBufferSize();\n\n\t\t\trenderTarget = this.renderTarget1.clone();\n\t\t\trenderTarget.setSize( size.width, size.height );\n\n\t\t}\n\n\t\tthis.renderTarget1.dispose();\n\t\tthis.renderTarget2.dispose();\n\t\tthis.renderTarget1 = renderTarget;\n\t\tthis.renderTarget2 = renderTarget.clone();\n\n\t\tthis.writeBuffer = this.renderTarget1;\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t},\n\n\tsetSize: function ( width, height ) {\n\n\t\tthis.renderTarget1.setSize( width, height );\n\t\tthis.renderTarget2.setSize( width, height );\n\n\t\tfor ( var i = 0; i < this.passes.length; i ++ ) {\n\n\t\t\tthis.passes[ i ].setSize( width, height );\n\n\t\t}\n\n\t}\n\n} );\n\n\nTHREE.Pass = function () {\n\n\t// if set to true, the pass is processed by the composer\n\tthis.enabled = true;\n\n\t// if set to true, the pass indicates to swap read and write buffer after rendering\n\tthis.needsSwap = true;\n\n\t// if set to true, the pass clears its buffer before rendering\n\tthis.clear = false;\n\n\t// if set to true, the result of the pass is rendered to screen\n\tthis.renderToScreen = false;\n\n};\n\nObject.assign( THREE.Pass.prototype, {\n\n\tsetSize: function ( width, height ) {},\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tconsole.error( 'THREE.Pass: .render() must be implemented in derived pass.' );\n\n\t}\n\n} );\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\nimport * as THREE from \"three\";\nimport {EffectComposer} from 'threefix/postprocessing/EffectComposer';\n\nTHREE.FilmPass = function ( noiseIntensity, scanlinesIntensity, scanlinesCount, grayscale ) {\n\n\tTHREE.Pass.call( this );\n\n\tif ( THREE.FilmShader === undefined )\n\t\tconsole.error( \"THREE.FilmPass relies on THREE.FilmShader\" );\n\n\tvar shader = THREE.FilmShader;\n\n\tthis.uniforms = THREE.UniformsUtils.clone( shader.uniforms );\n\n\tthis.material = new THREE.ShaderMaterial( {\n\n\t\tuniforms: this.uniforms,\n\t\tvertexShader: shader.vertexShader,\n\t\tfragmentShader: shader.fragmentShader\n\n\t} );\n\n\tif ( grayscale !== undefined )\tthis.uniforms.grayscale.value = grayscale;\n\tif ( noiseIntensity !== undefined ) this.uniforms.nIntensity.value = noiseIntensity;\n\tif ( scanlinesIntensity !== undefined ) this.uniforms.sIntensity.value = scanlinesIntensity;\n\tif ( scanlinesCount !== undefined ) this.uniforms.sCount.value = scanlinesCount;\n\n\tthis.camera = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\tthis.scene  = new THREE.Scene();\n\n\tthis.quad = new THREE.Mesh( new THREE.PlaneBufferGeometry( 2, 2 ), null );\n\tthis.quad.frustumCulled = false; // Avoid getting clipped\n\tthis.scene.add( this.quad );\n\n};\n\nTHREE.FilmPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {\n\n\tconstructor: THREE.FilmPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tthis.uniforms[ \"tDiffuse\" ].value = readBuffer.texture;\n\t\tthis.uniforms[ \"time\" ].value += delta;\n\n\t\tthis.quad.material = this.material;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.render( this.scene, this.camera );\n\n\t\t} else {\n\n\t\t\trenderer.render( this.scene, this.camera, writeBuffer, this.clear );\n\n\t\t}\n\n\t}\n\n} );\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\nimport * as THREE from \"three\";\nimport {EffectComposer} from 'threefix/postprocessing/EffectComposer';\n\nTHREE.MaskPass = function ( scene, camera ) {\n\n\tTHREE.Pass.call( this );\n\n\tthis.scene = scene;\n\tthis.camera = camera;\n\n\tthis.clear = true;\n\tthis.needsSwap = false;\n\n\tthis.inverse = false;\n\n};\n\nTHREE.MaskPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {\n\n\tconstructor: THREE.MaskPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tvar context = renderer.context;\n\t\tvar state = renderer.state;\n\n\t\t// don't update color or depth\n\n\t\tstate.buffers.color.setMask( false );\n\t\tstate.buffers.depth.setMask( false );\n\n\t\t// lock buffers\n\n\t\tstate.buffers.color.setLocked( true );\n\t\tstate.buffers.depth.setLocked( true );\n\n\t\t// set up stencil\n\n\t\tvar writeValue, clearValue;\n\n\t\tif ( this.inverse ) {\n\n\t\t\twriteValue = 0;\n\t\t\tclearValue = 1;\n\n\t\t} else {\n\n\t\t\twriteValue = 1;\n\t\t\tclearValue = 0;\n\n\t\t}\n\n\t\tstate.buffers.stencil.setTest( true );\n\t\tstate.buffers.stencil.setOp( context.REPLACE, context.REPLACE, context.REPLACE );\n\t\tstate.buffers.stencil.setFunc( context.ALWAYS, writeValue, 0xffffffff );\n\t\tstate.buffers.stencil.setClear( clearValue );\n\n\t\t// draw into the stencil buffer\n\n\t\trenderer.render( this.scene, this.camera, readBuffer, this.clear );\n\t\trenderer.render( this.scene, this.camera, writeBuffer, this.clear );\n\n\t\t// unlock color and depth buffer for subsequent rendering\n\n\t\tstate.buffers.color.setLocked( false );\n\t\tstate.buffers.depth.setLocked( false );\n\n\t\t// only render where stencil is set to 1\n\n\t\tstate.buffers.stencil.setFunc( context.EQUAL, 1, 0xffffffff );  // draw if == 1\n\t\tstate.buffers.stencil.setOp( context.KEEP, context.KEEP, context.KEEP );\n\n\t}\n\n} );\n\n\nTHREE.ClearMaskPass = function () {\n\n\tTHREE.Pass.call( this );\n\n\tthis.needsSwap = false;\n\n};\n\nTHREE.ClearMaskPass.prototype = Object.create( THREE.Pass.prototype );\n\nObject.assign( THREE.ClearMaskPass.prototype, {\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\trenderer.state.buffers.stencil.setTest( false );\n\n\t}\n\n} );\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\nimport * as THREE from \"three\";\nimport {EffectComposer} from 'threefix/postprocessing/EffectComposer';\n\nTHREE.RenderPass = function ( scene, camera, overrideMaterial, clearColor, clearAlpha ) {\n\n\tTHREE.Pass.call( this );\n\n\tthis.scene = scene;\n\tthis.camera = camera;\n\n\tthis.overrideMaterial = overrideMaterial;\n\n\tthis.clearColor = clearColor;\n\tthis.clearAlpha = ( clearAlpha !== undefined ) ? clearAlpha : 0;\n\n\tthis.clear = true;\n\tthis.clearDepth = false;\n\tthis.needsSwap = false;\n\n};\n\nTHREE.RenderPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {\n\n\tconstructor: THREE.RenderPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tvar oldAutoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tthis.scene.overrideMaterial = this.overrideMaterial;\n\n\t\tvar oldClearColor, oldClearAlpha;\n\n\t\tif ( this.clearColor ) {\n\n\t\t\toldClearColor = renderer.getClearColor().getHex();\n\t\t\toldClearAlpha = renderer.getClearAlpha();\n\n\t\t\trenderer.setClearColor( this.clearColor, this.clearAlpha );\n\n\t\t}\n\n\t\tif ( this.clearDepth ) {\n\n\t\t\trenderer.clearDepth();\n\n\t\t}\n\n\t\trenderer.render( this.scene, this.camera, this.renderToScreen ? null : readBuffer, this.clear );\n\n\t\tif ( this.clearColor ) {\n\n\t\t\trenderer.setClearColor( oldClearColor, oldClearAlpha );\n\n\t\t}\n\n\t\tthis.scene.overrideMaterial = null;\n\t\trenderer.autoClear = oldAutoClear;\n\t}\n\n} );\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\nimport * as THREE from \"three\";\nimport {EffectComposer} from 'threefix/postprocessing/EffectComposer';\n\nTHREE.ShaderPass = function ( shader, textureID ) {\n\n\tTHREE.Pass.call( this );\n\n\tthis.textureID = ( textureID !== undefined ) ? textureID : \"tDiffuse\";\n\n\tif ( shader instanceof THREE.ShaderMaterial ) {\n\n\t\tthis.uniforms = shader.uniforms;\n\n\t\tthis.material = shader;\n\n\t} else if ( shader ) {\n\n\t\tthis.uniforms = THREE.UniformsUtils.clone( shader.uniforms );\n\n\t\tthis.material = new THREE.ShaderMaterial( {\n\n\t\t\tdefines: Object.assign( {}, shader.defines ),\n\t\t\tuniforms: this.uniforms,\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader\n\n\t\t} );\n\n\t}\n\n\tthis.camera = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\tthis.scene = new THREE.Scene();\n\n\tthis.quad = new THREE.Mesh( new THREE.PlaneBufferGeometry( 2, 2 ), null );\n\tthis.quad.frustumCulled = false; // Avoid getting clipped\n\tthis.scene.add( this.quad );\n\n};\n\nTHREE.ShaderPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {\n\n\tconstructor: THREE.ShaderPass,\n\n\trender: function( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tif ( this.uniforms[ this.textureID ] ) {\n\n\t\t\tthis.uniforms[ this.textureID ].value = readBuffer.texture;\n\n\t\t}\n\n\t\tthis.quad.material = this.material;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.render( this.scene, this.camera );\n\n\t\t} else {\n\n\t\t\trenderer.render( this.scene, this.camera, writeBuffer, this.clear );\n\n\t\t}\n\n\t}\n\n} );\n","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * Convolution shader\n * ported from o3d sample to WebGL / GLSL\n * http://o3d.googlecode.com/svn/trunk/samples/convolution.html\n */\nimport * as THREE from \"three\";\n\nTHREE.ConvolutionShader = {\n\n\tdefines: {\n\n\t\t\"KERNEL_SIZE_FLOAT\": \"25.0\",\n\t\t\"KERNEL_SIZE_INT\": \"25\"\n\n\t},\n\n\tuniforms: {\n\n\t\t\"tDiffuse\":        { value: null },\n\t\t\"uImageIncrement\": { value: new THREE.Vector2( 0.001953125, 0.0 ) },\n\t\t\"cKernel\":         { value: [] }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"uniform vec2 uImageIncrement;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv - ( ( KERNEL_SIZE_FLOAT - 1.0 ) / 2.0 ) * uImageIncrement;\",\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\n\t\t\"uniform float cKernel[ KERNEL_SIZE_INT ];\",\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\t\t\"uniform vec2 uImageIncrement;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vec2 imageCoord = vUv;\",\n\t\t\t\"vec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );\",\n\n\t\t\t\"for( int i = 0; i < KERNEL_SIZE_INT; i ++ ) {\",\n\n\t\t\t\t\"sum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];\",\n\t\t\t\t\"imageCoord += uImageIncrement;\",\n\n\t\t\t\"}\",\n\n\t\t\t\"gl_FragColor = sum;\",\n\n\t\t\"}\"\n\n\n\t].join( \"\\n\" ),\n\n\tbuildKernel: function ( sigma ) {\n\n\t\t// We lop off the sqrt(2 * pi) * sigma term, since we're going to normalize anyway.\n\n\t\tfunction gauss( x, sigma ) {\n\n\t\t\treturn Math.exp( - ( x * x ) / ( 2.0 * sigma * sigma ) );\n\n\t\t}\n\n\t\tvar i, values, sum, halfWidth, kMaxKernelSize = 25, kernelSize = 2 * Math.ceil( sigma * 3.0 ) + 1;\n\n\t\tif ( kernelSize > kMaxKernelSize ) kernelSize = kMaxKernelSize;\n\t\thalfWidth = ( kernelSize - 1 ) * 0.5;\n\n\t\tvalues = new Array( kernelSize );\n\t\tsum = 0.0;\n\t\tfor ( i = 0; i < kernelSize; ++ i ) {\n\n\t\t\tvalues[ i ] = gauss( i - halfWidth, sigma );\n\t\t\tsum += values[ i ];\n\n\t\t}\n\n\t\t// normalize the kernel\n\n\t\tfor ( i = 0; i < kernelSize; ++ i ) values[ i ] /= sum;\n\n\t\treturn values;\n\n\t}\n\n};\n","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * Full-screen textured quad shader\n */\nimport * as THREE from \"three\";\n\nTHREE.CopyShader = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\": { value: null },\n\t\t\"opacity\":  { value: 1.0 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv;\",\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\n\t\t\"uniform float opacity;\",\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vec4 texel = texture2D( tDiffuse, vUv );\",\n\t\t\t\"gl_FragColor = opacity * texel;\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" )\n\n};\n","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * Film grain & scanlines shader\n *\n * - ported from HLSL to WebGL / GLSL\n * http://www.truevision3d.com/forums/showcase/staticnoise_colorblackwhite_scanline_shaders-t18698.0.html\n *\n * Screen Space Static Postprocessor\n *\n * Produces an analogue noise overlay similar to a film grain / TV static\n *\n * Original implementation and noise algorithm\n * Pat 'Hawthorne' Shearon\n *\n * Optimized scanlines + noise version with intensity scaling\n * Georg 'Leviathan' Steinrohder\n *\n * This version is provided under a Creative Commons Attribution 3.0 License\n * http://creativecommons.org/licenses/by/3.0/\n */\nimport * as THREE from \"three\";\n\nTHREE.FilmShader = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\":   { value: null },\n\t\t\"time\":       { value: 0.0 },\n\t\t\"nIntensity\": { value: 0.5 },\n\t\t\"sIntensity\": { value: 0.05 },\n\t\t\"sCount\":     { value: 4096 },\n\t\t\"grayscale\":  { value: 1 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv;\",\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\n\t\t\"#include <common>\",\n\t\t\n\t\t// control parameter\n\t\t\"uniform float time;\",\n\n\t\t\"uniform bool grayscale;\",\n\n\t\t// noise effect intensity value (0 = no effect, 1 = full effect)\n\t\t\"uniform float nIntensity;\",\n\n\t\t// scanlines effect intensity value (0 = no effect, 1 = full effect)\n\t\t\"uniform float sIntensity;\",\n\n\t\t// scanlines effect count value (0 = no effect, 4096 = full effect)\n\t\t\"uniform float sCount;\",\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t// sample the source\n\t\t\t\"vec4 cTextureScreen = texture2D( tDiffuse, vUv );\",\n\n\t\t\t// make some noise\n\t\t\t\"float dx = rand( vUv + time );\",\n\n\t\t\t// add noise\n\t\t\t\"vec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx, 0.0, 1.0 );\",\n\n\t\t\t// get us a sine and cosine\n\t\t\t\"vec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );\",\n\n\t\t\t// add scanlines\n\t\t\t\"cResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;\",\n\n\t\t\t// interpolate between source and result by intensity\n\t\t\t\"cResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );\",\n\n\t\t\t// convert to grayscale if desired\n\t\t\t\"if( grayscale ) {\",\n\n\t\t\t\t\"cResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );\",\n\n\t\t\t\"}\",\n\n\t\t\t\"gl_FragColor =  vec4( cResult, cTextureScreen.a );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" )\n\n};\n","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * Focus shader\n * based on PaintEffect postprocess from ro.me\n * http://code.google.com/p/3-dreams-of-black/source/browse/deploy/js/effects/PaintEffect.js\n */\nimport * as THREE from \"three\";\n\nTHREE.FocusShader = {\n\n\tuniforms : {\n\n\t\t\"tDiffuse\":       { value: null },\n\t\t\"screenWidth\":    { value: 1024 },\n\t\t\"screenHeight\":   { value: 1024 },\n\t\t\"sampleDistance\": { value: 0.94 },\n\t\t\"waveFactor\":     { value: 0.00125 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv;\",\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\n\t\t\"uniform float screenWidth;\",\n\t\t\"uniform float screenHeight;\",\n\t\t\"uniform float sampleDistance;\",\n\t\t\"uniform float waveFactor;\",\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vec4 color, org, tmp, add;\",\n\t\t\t\"float sample_dist, f;\",\n\t\t\t\"vec2 vin;\",\n\t\t\t\"vec2 uv = vUv;\",\n\n\t\t\t\"add = color = org = texture2D( tDiffuse, uv );\",\n\n\t\t\t\"vin = ( uv - vec2( 0.5 ) ) * vec2( 1.4 );\",\n\t\t\t\"sample_dist = dot( vin, vin ) * 2.0;\",\n\n\t\t\t\"f = ( waveFactor * 100.0 + sample_dist ) * sampleDistance * 4.0;\",\n\n\t\t\t\"vec2 sampleSize = vec2(  1.0 / screenWidth, 1.0 / screenHeight ) * vec2( f );\",\n\n\t\t\t\"add += tmp = texture2D( tDiffuse, uv + vec2( 0.111964, 0.993712 ) * sampleSize );\",\n\t\t\t\"if( tmp.b < color.b ) color = tmp;\",\n\n\t\t\t\"add += tmp = texture2D( tDiffuse, uv + vec2( 0.846724, 0.532032 ) * sampleSize );\",\n\t\t\t\"if( tmp.b < color.b ) color = tmp;\",\n\n\t\t\t\"add += tmp = texture2D( tDiffuse, uv + vec2( 0.943883, -0.330279 ) * sampleSize );\",\n\t\t\t\"if( tmp.b < color.b ) color = tmp;\",\n\n\t\t\t\"add += tmp = texture2D( tDiffuse, uv + vec2( 0.330279, -0.943883 ) * sampleSize );\",\n\t\t\t\"if( tmp.b < color.b ) color = tmp;\",\n\n\t\t\t\"add += tmp = texture2D( tDiffuse, uv + vec2( -0.532032, -0.846724 ) * sampleSize );\",\n\t\t\t\"if( tmp.b < color.b ) color = tmp;\",\n\n\t\t\t\"add += tmp = texture2D( tDiffuse, uv + vec2( -0.993712, -0.111964 ) * sampleSize );\",\n\t\t\t\"if( tmp.b < color.b ) color = tmp;\",\n\n\t\t\t\"add += tmp = texture2D( tDiffuse, uv + vec2( -0.707107, 0.707107 ) * sampleSize );\",\n\t\t\t\"if( tmp.b < color.b ) color = tmp;\",\n\n\t\t\t\"color = color * vec4( 2.0 ) - ( add / vec4( 8.0 ) );\",\n\t\t\t\"color = color + ( add / vec4( 8.0 ) - color ) * ( vec4( 1.0 ) - vec4( sample_dist * 0.5 ) );\",\n\n\t\t\t\"gl_FragColor = vec4( color.rgb * color.rgb * vec3( 0.95 ) + color.rgb, 1.0 );\",\n\n\t\t\"}\"\n\n\n\t].join( \"\\n\" )\n};\n","html, body\n  background-color: rgb(67, 66, 67)\n  height: 100vh\n  position: relative\n  margin: 0\n  font-family: roboto mono\n  color: rgb(230,230,230)\n\n.content\n  width: 100%\n  overflow: hidden\n\n.console \n  font-family: roboto mono\n  font-size: 2.0em\n  text-shadow: 0 0 20px #0C9EFF\n  margin-top: 50px\n\n.line\n  lost-row: 1/3\n\n.line *\n  color: #0C9EFF\n\n.line .strong-word *\n  color: #BC3CF4\n  text-shadow: 0 0 20px #BC3CF4\n\n.carret\n  border: 1px solid #0C9EFF\n  display: inline-block\n  width: 15px\n  height: 0.7em\n  box-shadow: 0 0 10px 1px #0C9EFF\n\n.strong-word .word-switch:nth-of-type(2)\n  position: absolute\n  margin-left: -154px\n\n.strong-word .word-switch:nth-of-type(3)\n  position: absolute\n  margin-left: -154px\n\n.word-switch span\n  display: inline-block\n  transition: 400ms transform\n\n.console-letter\n  display: inline-block\n  position: relative\n  transition: 1900ms all cubic-bezier(0.21, 0.46, 0, 0.99)\n\n.console-letter:hover\n  transition: 1600ms all cubic-bezier(0.21, 0.46, 0, 0.99)\n  transform: scale(1.3)\n\n.screen\n  border: 1px solid transparent\n  position: relative\n  lost-column: 9/10\n  lost-offset: 1/20\n  transform: translate3d(0,0,0)\n\n.content > compose:last-child > .screen > .btn-next\n  display: none\n\n.screen.skills\n  lost-column: 1 !important\n  margin-left: 0 !important\n  overflow: hidden\n\n.btn\n  display: flex\n  background-color: #0C9EFF\n  min-width: 44px\n  min-height: 28px\n  border: 1px solid #1CAEFF\n  z-index: 100\n  transition: all 0.3s ease-out\n  cursor: pointer\n  border-radius: 3px 3px 0 0\n\n.btn:hover\n  box-shadow: 0px 0px 12px 4px inset #8CBEFFff\n  font-size: 0.8em !important\n  padding-top: 0.1em\n\n.btn-hidden\n  opacity: 0\n\n.btn-next\n  position: absolute\n  bottom: 0\n  left: 50%\n  margin-left: -22px\n\n.btn-next::after\n  content: '>'\n  transform: translateX(16px)rotate(90deg)\n  font-size: 1.5em\n\n//project section\n.project-base-title\n  width: 100%\n  height: 30px\n  text-align: center\n  background-color: #0C9EFF\n  color: rgb(67, 66, 67)\n  font-size: 1.6em\n  font-variant: all-petite-caps\n  z-index: 200\n  position: absolute\n\n.project-base-title span\n  position: relative\n  bottom: 20%\n\n.project\n  position: absolute\n  width: 100%\n  height: calc(100vh - 30px)\n\n.project .cover-wrapper\n  position: absolute\n  height: 100%\n  top: 30px\n\n.project .title-wrapper\n  position: relative\n  width: 100%\n  height: 40px\n  padding-bottom: 2px\n\n.project .description-wrapper\n  position: relative\n  height: calc(100% - 40px)\n\n.project-title\n  overflow: hidden\n  display: flex\n  justify-content: space-between\n  flex-basis: 100%\n  position: relative\n  width: 100%\n  height: 40px\n  text-align: center\n  /* background-color: #0C9EFF */\n  color: #BC3CF4\n  border-bottom: 1px solid #0C9EFF\n  font-size: 1.5em\n  z-index:110\n\n.project-title span\n  background-color: rgb(47, 46, 47)\n  width: 100%\n\n.project-title .btn\n  color: white\n  font-size: 0.9em\n  z-index: 0\n\n.project-title *\n  margin-top: 0.3em\n  display: inline-block\n  font-weight: 40\n\n.project-cover\n  position: absolute\n  border: 1px solid transparent\n  height: 100%\n  width: 100%\n  overflow: hidden\n  background-color: rgb(47, 46, 47)\n\n.project-cover img\n  width: 100%\n\n.image-wrapper\n  overflow: hidden\n  width: 100%\n  height: 100%\n  display: block\n  position: absolute !important\n  top: 50%\n  margin-top: -30%\n\n.image-wrapper.vertical\n  top: 0\n  margin-top: 0\n  height: calc(100% - 34px)\n\n.vertical img\n  width: auto\n  height: 100%\n  margin-left: 0\n\n.image-container\n  width: 100%\n  height: 100%\n  display: table-cell\n  vertical-align: middle\n\n.cover-image-back\n  width: 50px\n  height: 100px\n  left: 50px\n  border: 1px solid black\n  position: absolute\n\n.cover-image-next\n  width: 50px\n  height: 100px\n  right: -50px\n  border: 1px solid black\n  position: absolute\n\nspan.cover-control\n  border: 1px solid transparent\n  background-color: rgb(77, 76, 77)\n  border-radius: 15px\n  width: 7px\n  height: 7px\n  margin: 3px\n  display: inline-block\n  cursor: pointer\n  transition: all 0.35s\n  background-color: rgb(67, 66, 67)\n  \nspan.cover-control:hover\n  background-color: white !important\n  box-shadow: 0 0 2px 1px white\n\nspan.cover-control.active\n  background-color: #0c9eff !important\n  box-shadow: 0 0 2px 1px #0c9eff\n\nspan.cover-control-container \n  width: 100%\n  height: 20px\n  position: absolute\n  margin: 0 auto\n  text-align: center\n  z-index: 11\n  transition: all 0.3s\n\nspan.cover-control-bar\n  background-color: rgb(47, 46, 47)\n  padding-left: 15px\n  padding-right: 15px\n  border-radius: 10px 10px 0 0\n\n.project-desc \n  height: 100%\n  z-index: 10\n  top: 30px\n  position: relative\n\n.project-desc .description\n  padding-top: 50px\n  background-color: rgb(47, 46, 47)\n  height: calc(100% - 52px)\n  width: 100%\n  position: absolute\n\n.desc-content\n  padding: 15px\n  display: flex\n  flex-direction: column\n  align-items: center\n  justify-content: space-between\n  height: 80%\n\n.desc-top\n  text-align: justify\n\n.desc-bot\n  background-color: rgba(65,65,65,1)\n  padding: 8px\n  border-radius: 9px\n  border: 1px solid #1caeff7d\n  transition: all 0.35s ease-out\n\n.desc-bot:hover\n  background-color: rgba(75,75,75,1)\n  box-shadow: 0px 0px 5px 2px #1caeff7d\n\nmenu-bar\n  position: fixed\n  top: -1px\n  lost-column: 9/10\n  lost-offset: 1/20\n  z-index: 999\n\nmenu-bar .progress\n  display: flex\n  width: 100%\n  left: 1px\n  position: absolute\n  height: 4px\n  background-color: rgb(66, 67, 66)\n\nmenu-bar .progress-foreground\n  display: inline-block\n  background-color: #0c9eff\n  margin-top: 1px\n  height: 2px\n  width: 50%\n  box-shadow: 0 0 2px 0px #0b8eff\n  transition: all 0.35s ease-out\n\nmenu-bar .progress-current\n  display: inline-block\n  background-color: #BC3CF4\n  margin-top: 1px\n  height: 2px\n  width: 50%\n  box-shadow: 0 0 2px 0px #BB2CF4\n  transition: all 0.35s ease-out\n\nmenu-bar .menu\n  height: 0px\n  display: flex\n  justify-content: space-around\n  overflow: hidden\n  transition: all 0.35s ease-out\n\nmenu-bar .menu-item\n  flex-basis: 100%\n  text-align: center\n  background-color: rgb(76, 77, 76)\n  border-right: 1px solid #0c9eff\n  cursor: pointer\n\nmenu-bar .menu-item:hover\n  background-color: rgb(66, 67, 66)\n\n.screen-desc-container\n  position: absolute\n  display: flex\n  flex-direction: column\n  width: 100%\n  height: 80%\n  justify-content: space-evenly\n\n.portrait-container\n  display: flex\n\n.portrait-container img\n  width: calc(100vw * 0.2 + 15px)\n  position: relative\n  filter: blur(50px)hue-rotate(360deg)\n  transition: filter 1s ease-out\n\n.portrait-crop\n  border-radius: 100%\n  width: calc(100vw * 0.2)\n  height: calc(100vw * 0.2)\n  overflow: hidden\n  box-shadow: 0px 0px 12px 4px rgba(0, 0, 0, 0.2)\n  position: relative\n  margin: 0 auto\n  position: relative\n  z-index: 800\n  opacity: 0\n  transition: opacity 1s ease-in\n\n.form-container\n  width: 100%\n  height: 100%\n  display: flex\n  align-items: center\n  justify-content: space-around\n\n.form-container form\n  display: flex\n  flex-direction: column\n  justify-content: space-evenly\n  height: 400px\n  width: 400px\n  border-radius: 100%\n  background-color: rgb(96,97,96)\n  padding: 100px\n\n.form-row\n  display: flex\n  justify-content: space-evenly\n  align-items: baseline\n\n.form-row > *\n  flex-grow: 1\n  padding: 8px\n  margin: 5px\n\ninput[type='submit']\n  background-image: url(img/plane.png)\n  background-repeat: no-repeat\n  background-position: center\n  color: transparent\n  background-color: #0c9eff\n  flex-basis: 50%\n  flex-grow: 0\n  background-size: contain\n  background-position-y: 3px\n  transition: background-position-x 1.8s ease-in, background-position-y 1.8s cubic-bezier(.67, .24, .63, .58)\n\ninput[type='submit']:hover\n  background-position-x: 200px\n  background-position-y: -30px\n\np\n  text-indent: 30px\n\n\n.form-error-full\n  position: absolute\n  width: 370px\n  margin-top: 30px\n  color:  #CC4CF4\n  font-weight: 700\n  font-size: 0.75em\n  margin-left: -20px\n\n.form-error-full.moveright\n  text-align: right\n  margin-left: 20px\n\n.form-error-full.movedown\n  margin-top: 165px\n\n.form-row input\n  border: 1px solid transparent\n  border-radius: 50px\n  flex-basis: 70%\n  outline-style: unset\n\n.flex-half\n  flex-basis: 50%\n\ntextarea\n  resize: none\n  border-radius: 20px\n  outline-style: unset\n  max-height: 150px\n\n.chrome-warning\n  width: 360px\n  max-height: 200px\n  border: 1px solid #0c9eff\n  border-radius: 15px\n  padding: 25px\n  background-color: #606160\n  opacity: 0\n  transition: opacity 0.5s ease\n  position: absolute\n  bottom: 0\n  left: 0\n\n.show-keys\n  width: calc(100vw * 0.2 + 25px)\n  max-height: 200px\n  border: 1px solid #0c9eff\n  border-radius: 15px\n  padding: 25px\n  background-color: #606160\n  transition: opacity 0.5s ease\n  position: absolute\n  bottom: 0\n  right: 0\n  font-size: 0.8em\n  text-align: center\n  opacity: 0\n\n.key\n  display: inline-block\n  background-color: #0C9EFF\n  width: 44px\n  height: 28px\n  border: 1px solid #1CAEFF\n  z-index: 100\n  transition: all 0.3s ease-out\n  cursor: pointer\n  border-radius: 3px\n  font-size: 1.5em\n  margin: 3px\n  text-align: center\n\n.contact-title\n  font-size: 20px\n\n.key.up span\n  transform: rotateZ(90deg)translate(1px, -1px)\n  display: inline-block\n  margin-left: 2px\n\n.key.down span\n  transform: rotateZ(-90deg)translate(-4px, 1px)\n  display: inline-block\n  margin-left: -2px\n  \n@media all and (max-width: 768px)\n  .show-keys\n    display: none\n@media all and (max-width: 1361px)\n  .project-desc\n    lost-column: 1.2/3 1\n  .project .cover-wrapper\n    lost-column: 1.82/3\n\n@media all and (min-width: 1361px)\n  .project-desc\n    lost-column: 0.8/3 1\n  .project .cover-wrapper\n    lost-column: 2.2/3\n\n"],"sourceRoot":".."}